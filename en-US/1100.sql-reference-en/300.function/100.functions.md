Functions 
==============================



Date and time functions 
--------------------------------

Date and time functions are used to display the date and time. 

#### CURDATE 

**Declaration** 

```javascript
CURDATE()
```



**Description** 

This function returns the current date without the time part. 

**Example** 

```javascript
obclient> SELECT CURDATE();
+------------+
| CURDATE() |
+------------+
| 2018-05-05 |
+------------+
1 row in set (0.00 sec)
```





#### CURRENT_DATE 

**Declaration** 

```javascript
CURRENT_DATE()
CURRENT_DATE
```



**Description** 

It is same as the `CURDATE()` function. 



#### CURRENT_TIME 

**Declaration** 

```javascript
CURRENT_TIME([scale])
```



**Description** 

This function returns the current time without the date part. 

The value of `scale` ranges from 0 to 6. It specifies the microsecond precision. Default value: 0. 

**Example** 

```javascript
obclient> SELECT CURRENT_TIME(6);
+-----------------+
| CURRENT_TIME(6) |
+-----------------+
| 11:11:45.215311 |
+-----------------+
1 row in set (0.01 sec)
```





#### CURRENT_TIMESTAMP 

**Declaration** 

```javascript
CURRENT_TIMESTAMP([scale])
```



**Description** 

This function returns the current date and time based on the specified time zone. 

The value of `scale` ranges from 0 to 6. It specifies the microsecond precision. Default value: 0. 

**Example** 

```javascript
obclient> SELECT CURRENT_TIMESTAMP(6);
+----------------------------+
| CURRENT_TIMESTAMP(6) |
+----------------------------+
| 2018-05-05 11:35:39.177764 |
+----------------------------+
1 row in set (0.01 sec)
```





#### CURTIME 

**Declaration** 

```javascript
CURTIME()
```



**Description** 

The same as the `CURRENT_TIME()` function. 



#### DATE_ADD 

**Declaration** 

```javascript
DATE_ADD(date, INTERVAL expr unit)
```



**Description** 

You can use this statement for the arithmetic calculation of the date and time. 

* `date` specifies the basic date and time. The date part is required and the time part is optional.

  




<!-- -->

* `expr` specifies the time interval, which can be a negative value.

  




<!-- -->

* `unit` specifies the unit of the time interval.

  




The following table lists all time interval units.


|         Unit         |    Type     |                Definition                 |                 Format                 |
|----------------------|-------------|-------------------------------------------|----------------------------------------|
| `MICROSECOND`        | Independent | Microseconds                              | `MICROSECONDS`                         |
| `SECOND`             | Independent | Seconds                                   | `SECONDS`                              |
| `MINUTE`             | Independent | Minutes                                   | `MINUTES`                              |
| `HOUR`               | Independent | Hours                                     | `HOURS`                                |
| `DAY`                | Independent | Days                                      | `DAYS`                                 |
| `WEEK`               | Independent | Weeks                                     | `WEEKS`                                |
| `MONTH`              | Independent | Months                                    | `MONTHS`                               |
| `QUARTER`            | Independent | Quarters                                  | `QUARTERS`                             |
| `YEAR`               | Independent | Years                                     | `YEARS`                                |
| `SECOND_MICROSECOND` | Combination | Seconds and microseconds                  | `'SECONDS.MICROSECONDS'`               |
| `MINUTE_MICROSECOND` | Combined    | Minutes, seconds, and microseconds        | `'MINUTES:SECONDS.MICROSECONDS'`       |
| `MINUTE_SECOND`      | Combined    | Minutes and seconds                       | `'MINUTES:SECONDS'`                    |
| `HOUR_MICROSECOND`   | Combined    | Hours, minutes, seconds, and microseconds | `'HOURS:MINUTES:SECONDS.MICROSECONDS'` |
| `HOUR_SECOND`        | Combined    | Hours, minutes, and seconds               | `'HOURS:MINUTES:SECONDS'`              |
| `HOUR_MINUTE`        | Combined    | Hours and minutes                         | `'HOURS:MINUTES'`                      |
| `DAY_SECOND`         | Combined    | Days, hours, minutes, and seconds         | `'DAYS HOURS:MINUTES:SECONDS'`         |
| `DAY_MINUTE`         | Combined    | Days, hours, and minutes                  | `'DDAYSD HOURS:MINUTES'`               |
| `DAY_HOUR`           | Combined    | Days and hours                            | `'DAYS HOURS'`                         |
| `YEAR_MONTH`         | Combined    | Years and months                          | `'YEARS-MONTHS'`                       |



**Example** 

```javascript
obclient> SELECT
    -> DATE_ADD(NOW(), INTERVAL 5 DAY),
    -> DATE_ADD('2014-01-10', INTERVAL 5 MICROSECOND),
    -> DATE_ADD('2014-01-10', INTERVAL 5 SECOND),
    -> DATE_ADD('2014-01-10', INTERVAL 5 MINUTE),
    -> DATE_ADD('2014-01-10', INTERVAL 5 HOUR),
    -> DATE_ADD('2014-01-10', INTERVAL 5 DAY),
    -> DATE_ADD('2014-01-10', INTERVAL 5 WEEK),
    -> DATE_ADD('2014-01-10', INTERVAL 5 MONTH),
    -> DATE_ADD('2014-01-10', INTERVAL 5 QUARTER),
    -> DATE_ADD('2014-01-10', INTERVAL 5 YEAR),
    -> DATE_ADD('2014-01-10', INTERVAL '5.000005' SECOND_MICROSECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '05:05.000005' MINUTE_MICROSECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '05:05' MINUTE_SECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '05:05:05.000005' HOUR_MICROSECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '05:05:05' HOUR_SECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '05:05' HOUR_MINUTE),
    -> DATE_ADD('2014-01-10', INTERVAL '01 05:05:05.000005' DAY_MICROSECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '01 05:05:05' DAY_SECOND),
    -> DATE_ADD('2014-01-10', INTERVAL '01 05:05' DAY_MINUTE),
    -> DATE_ADD('2014-01-10', INTERVAL '01 05' DAY_HOUR),
    -> DATE_ADD('2014-01-10', INTERVAL '1-01' YEAR_MONTH)
    -> \G
*************************** 1. row ***************************
                                      DATE_ADD(NOW(), INTERVAL 5 DAY): 2018-05-10 14:54:52
                       DATE_ADD('2014-01-10', INTERVAL 5 MICROSECOND): 2014-01-10 00:00:00.000005
                            DATE_ADD('2014-01-10', INTERVAL 5 SECOND): 2014-01-10 00:00:05
                            DATE_ADD('2014-01-10', INTERVAL 5 MINUTE): 2014-01-10 00:05:00
                              DATE_ADD('2014-01-10', INTERVAL 5 HOUR): 2014-01-10 05:00:00
                               DATE_ADD('2014-01-10', INTERVAL 5 DAY): 2014-01-15
                              DATE_ADD('2014-01-10', INTERVAL 5 WEEK): 2014-02-14
                             DATE_ADD('2014-01-10', INTERVAL 5 MONTH): 2014-06-10
                           DATE_ADD('2014-01-10', INTERVAL 5 QUARTER): 2015-04-10
                              DATE_ADD('2014-01-10', INTERVAL 5 YEAR): 2019-01-10
       DATE_ADD('2014-01-10', INTERVAL '5.000005' SECOND_MICROSECOND): 2014-01-10 00:00:05.000005
   DATE_ADD('2014-01-10', INTERVAL '05:05.000005' MINUTE_MICROSECOND): 2014-01-10 00:05:05.000005
               DATE_ADD('2014-01-10', INTERVAL '05:05' MINUTE_SECOND): 2014-01-10 00:05:05
  DATE_ADD('2014-01-10', INTERVAL '05:05:05.000005' HOUR_MICROSECOND): 2014-01-10 05:05:05.000005
              DATE_ADD('2014-01-10', INTERVAL '05:05:05' HOUR_SECOND): 2014-01-10 05:05:05
                 DATE_ADD('2014-01-10', INTERVAL '05:05' HOUR_MINUTE): 2014-01-10 05:05:00
DATE_ADD('2014-01-10', INTERVAL '01 05:05:05.000005' DAY_MICROSECOND): 2014-01-11 05:05:05.000005
            DATE_ADD('2014-01-10', INTERVAL '01 05:05:05' DAY_SECOND): 2014-01-11 05:05:05
               DATE_ADD('2014-01-10', INTERVAL '01 05:05' DAY_MINUTE): 2014-01-11 05:05:00
                    DATE_ADD('2014-01-10', INTERVAL '01 05' DAY_HOUR): 2014-01-11 05:00:00
                   DATE_ADD('2014-01-10', INTERVAL '1-01' YEAR_MONTH): 2015-02-10
1 row in set (0.01 sec)
```





#### DATE_FORMAT 

**Declaration** 

```javascript
DATE_FORMAT(date, format)
```



**Description** 

Export the date and time in the specified format. 

* `date` specifies the date and time.

  




<!-- -->

* `format` specifies the output format.

  






The following table lists all output formats.


| Specifier |                                          Definition                                           |         Syntax         |
|-----------|-----------------------------------------------------------------------------------------------|------------------------|
| `%a`      | The abbreviation of the week.                                                                 | `Sun..Sat`             |
| `%b`      | The abbreviation of the month.                                                                | `Jan..Dec`             |
| `%c`      | The numeric format of the month.                                                              | `1..12`                |
| `%D`      | The abbreviation of the day.                                                                  | `1st..31st`            |
| `%d`      | The numeric format of the day.                                                                | `01..31`               |
| `%e`      | The numeric format of the day.                                                                | `1.. 31`               |
| `%f`      | The value for microsecond.                                                                    | `000000..999999`       |
| `%H`      | The value for hour.                                                                           | `00..23`               |
| `%h`      | The value for hour.                                                                           | `01..12`               |
| `%I`      | The value for hour.                                                                           | `01..12`               |
| `%i`      | The value for minute.                                                                         | `00..59`               |
| `%j`      | The day of the year.                                                                          | `001..366`             |
| `%k`      | The value for hour.                                                                           | `0..23`                |
| `%l`      | The value for hour.                                                                           | `0..12`                |
| `%M`      | The English name of the month.                                                                | `January..December`    |
| `%m`      | The numeric format of the month.                                                              | `01..12`               |
| `%p`      | The morning or afternoon.                                                                     | `AM/PM`                |
| `%r`      | The time in 12-hour format.                                                                   | `hh:mm:ss AM/PM`       |
| `%S`      | The value for second.                                                                         | `00..59`               |
| `%s`      | The value for second.                                                                         | `00..59`               |
| `%T`      | The time in 24-hour format.                                                                   | `hh:mm:ss`             |
| `%U`      | The week of the year, with Sunday taken as the first day of a week.                           | `00..53`               |
| `%u`      | The week of the year, with Monday taken as the first day of a week.                           | `00..53`               |
| `%V`      | The week of the year, with Sunday taken as the first day of a week (used together with `%X`). | `01..53`               |
| `%v`      | The week of the year, with Monday taken as the first day of a week (used together with `%X`). | `01..53`               |
| `%W`      | The English name of the week.                                                                 | `Sunday..Saturday`     |
| `%w`      | The day of the week.                                                                          | `0=Sunday..6=Saturday` |
| `%X`      | The year of the week, with Sunday taken as the first day of a week (used together with `%V`). |                        |
| `%x`      | The year of the week, with Monday taken as the first day of a week (used together with `%v`). |                        |
| `%Y`      | The year in four-digit format.                                                                |                        |
| `%y`      | The year in two-digit format.                                                                 |                        |
| `%%`      | The literal `%` character.                                                                    |                        |



**Example** 

```javascript
obclient> SELECT
    -> DATE_FORMAT('2014-01-01', '%Y-%M-%d'),
    -> DATE_FORMAT('2014-01-01', '%X-%V'),
    -> DATE_FORMAT('2014-01-01', '%U')
    -> \G
*************************** 1. row ***************************
DATE_FORMAT('2014-01-01', '%Y-%M-%d'): 2014-January-01
   DATE_FORMAT('2014-01-01', '%X-%V'): 2013-52
      DATE_FORMAT('2014-01-01 ', '%U'): 00
1 row in set (0.01 sec)
```





#### DATE_SUB 

**Declaration** 

```javascript
DATE_SUB(date, INTERVAL expr unit)
```



**Description** 

You can use this function to calculate the date and time. 

For more information, see `DATE_ADD()`. 



#### DATEDIFF 

**Declaration** 

```javascript
DATEDIFF(date1, date2)
```



**Description** 

This function returns the number of months between `date1` and `date2`. 

Only the date part of the parameter is used in calculation. The time part is ignored. 

**Example** 

```javascript
obclient> SELECT DATEDIFF('2015-06-19','1994-12-17');
+-------------------------------------+
| DATEDIFF('2015-06-19','1994-12-17') |
+-------------------------------------+
|                                7489 |
+-------------------------------------+
1 row in set (0.01 sec)
```





#### EXTRACT 

**Declaration** 

```javascript
EXTRACT(unit FROM date)
```



**Description** 

This function returns an integer value of the specified part of `date`. If multiple parts are specified, all values are spliced in order. 

For more information about `unit`, see `DATE_ADD()`. When `unit` is set to `WEEK`, see the description of `%U` in `DATE_FORMAT()`. 

**Example** 

```javascript
SELECT EXTRACT(WEEK FROM '2013-01-01'),
EXTRACT(WEEK FROM '2013-01-06')  
EXTRACT(YEAR_MONTH FROM '2012-03-09'),
EXTRACT(DAY FROM NOW())\G;
* 1. row *
EXTRACT(WEEK FROM '2013-01-01'): 0
EXTRACT(WEEK FROM '2013-01-06'): 1
EXTRACT(YEAR_MONTH FROM '2012-03-09'): 201203
EXTRACT(DAY FROM NOW()): 18
1 row in set (0.00 sec)
```





#### FROM_DAYS 

**Declaration** 

```javascript
FROM_DAYS(N)
```



**Description** 

This function returns the `DATE` value corresponding to the number of days specified for `N`. The number of days refers to the number of days from `0000-01-01`. 

**Example** 

```javascript
obclient> SELECT FROM_DAYS(736271), FROM_DAYS(700000);
+-------------------+-------------------+
| FROM_DAYS(736271) | FROM_DAYS(700000) |
+-------------------+-------------------+
| 2015-11-04        | 1916-07-15        |
+-------------------+-------------------+
1 row in set (0.00 sec)
```





#### FROM_UNIXTIME 

**Declaration** 

```javascript
FROM_UNIXTIME(unix_timestamp)
FROM_UNIXTIME(unix_timestamp, format)
```



**Description** 

* If `format` is not specified, a value of the `DATETIME` type is returned, regardless of the time zone.

  




<!-- -->

* If `format` is specified, a date and time string in the specified format is returned.

  




`unix_timestamp` refers to the UNIX timestamp, that is, the number of microseconds from `1970-01-01 00:00:00.000000`. 

The formats supported by `format` are listed in the **description** of `DATE_FORMAT()`. 

**Example** 

```javascript
obclient> SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(), '%Y %D %M %h:%i:%s %x');
+---------------------------------------------------------+
| FROM_UNIXTIME(UNIX_TIMESTAMP(), '%Y %D %M %h:%i:%s %x') |
+---------------------------------------------------------+
| 2018 5th May 08:41:26 2018                              |
+---------------------------------------------------------+
1 row in set (0.01 sec)
```





#### MONTH 

**Declaration** 

```javascript
MONTH(date)
```



**Description** 

This function returns the month of `date`. 

**Example** 

```javascript
obclient> SELECT MONTH('2008-02-03');
+---------------------+
| MONTH('2008-02-03') |
+---------------------+
|                   2 |
+---------------------+
1 row in set (0.01 sec)
```





#### NOW 

**Declaration** 

```javascript
NOW([scale])
```



**Description** 

The same as the `CURRENT_TIMESTAMP()` function. 



#### PERIOD_DIFF 

**Declaration** 

```javascript
PERIOD_DIFF(p1, p2)
```



**Description** 

This function returns the interval between two dates, in months. The date can contain only the year and month in the format of `YYYYMM` or `YYMM`. 

**Example** 

```javascript
obclient> SELECT PERIOD_DIFF(200802, 200703);
+----------------------------+
| PERIOD_DIFF(200802,200703) |
+----------------------------+
|                         11 |
+----------------------------+
1 row in set (0.01 sec)
```





#### STR_TO_DATE 

**Declaration** 

```javascript
STR_TO_DATE(str, format)
```



**Description** 

Use `format` to convert `str` into a `DATETIME`, `DATE`, or `TIME` value. The return value type depends on which parts of the date and time are included in `format`. 

The formats supported by `format` are listed in the **description** of `DATE_FORMAT()`. 

**Example** 

```javascript
obclient> SELECT STR_TO_DATE('2014-Jan-1st 5:5:5 pm', '%Y-%b-%D %r');
+-----------------------------------------------------+
| STR_TO_DATE('2014-Jan-1st 5:5:5 pm', '%Y-%b-%D %r') |
+-----------------------------------------------------+
| 2014-01-01 05:05:05                                 |
+-----------------------------------------------------+
1 row in set (0.01 sec)
```





#### TIME 

**Declaration** 

```javascript
TIME(datetime
```



**Description** 

This function returns the `datetime` value of the `TIME` data type. 

**Example** 

```javascript
obclient> SELECT TIME('2003-12-31 01:02:03');
+-----------------------------+
| TIME('2003-12-31 01:02:03') |
+-----------------------------+
| 01:02:03.000000             |
+-----------------------------+
1 row in set (0.01 sec)
```





#### TIME_TO_USEC 

**Declaration** 

```javascript
TIME_TO_USEC(date)
```



**Description** 

This function converts the value of `date` into microseconds from `1970-01-01 00:00:00.000000`, taking into account the time zone. 

`date` can represent the date or the date and time. 

**Example** 

```javascript
obclient> SELECT TIME_TO_USEC('2014-03-25'), TIME_TO_USEC(NOW());
+----------------------------+---------------------+
| TIME_TO_USEC('2014-03-25') | TIME_TO_USEC(NOW()) |
+----------------------------+---------------------+
|           1395676800000000 |    1525528100000000 |
+----------------------------+---------------------+
1 row in set (0.01 sec)
```





#### TIMEDIFF 

**Declaration** 

```javascript
TIMEDIFF(date1, date2)
```



**Description** 

This function returns the interval between two date and time values of the `TIME` data type. 

**Example** 

```javascript
obclient> SELECT
    -> TIMEDIFF('2015-06-06 12:12:12', '2014-06-05 11:11:11'),
    -> TIMEDIFF('2015-06-06 12:12:12', '2015-06-05 11:11:11')
    -> \G
*************************** 1. row ***************************
TIMEDIFF('2015-06-06 12:12:12', '2014-06-05 11:11:11'): 838:59:59
TIMEDIFF('2015-06-06 12:12:12', '2015-06-05 11:11:11'): 25:01:01
1 row in set (0.00 sec)
```





#### TIMESTAMPDIFF 

**Declaration** 

```javascript
TIMESTAMPDIFF(unit, date1, date2)
```



**Description** 

This function returns the interval between two date and time values in the unit specified for `unit`. `unit` can only be an independent unit in `DATE_ADD()`. 

**Example** 

```javascript
obclient> SELECT
    -> TIMESTAMPDIFF(SECOND, NOW(), '2011-01-01 11:11:11'),
    -> TIMESTAMPDIFF(DAY, '2011-01-01 11:11:11', NOW())
    -> \G
*************************** 1. row ***************************
TIMESTAMPDIFF(SECOND, NOW(), '2011-01-01 11:11:11'): -231677498
   TIMESTAMPDIFF(DAY, '2011-01-01 11:11:11', NOW()): 2681
1 row in set (0.00 sec)
```





#### TIMESTAMPADD 

**Declaration** 

```javascript
TIMESTAMPADD(unit, interval_expr, date)
```



**Description** 

You can use this function to calculate the date and time. 

The functionality of this function is the same as that of `DATE_ADD()`, but `unit` must be an independent unit. 

**Example** 

```javascript
obclient> SELECT
    -> TIMESTAMPADD(DAY, -5, '2010-01-01 00:00:00'),
    -> DATE_ADD('2010-01-01 00:00:00', INTERVAL -5 DAY)
    -> \G
*************************** 1. row ***************************
    TIMESTAMPADD(DAY, -5, '2010-01-01 00:00:00'): 2009-12-27 00:00:00
DATE_ADD('2010-01-01 00:00:00', INTERVAL -5 DAY): 2009-12-27 00:00:00
1 row in set (0.01 sec)
```





#### TO_DAYS 

**Declaration** 

```javascript
TO_DAYS(date)
```



**Description** 

This function returns the number of days corresponding to the value of `date`. The number of days refers to the number of days from `0000-01-01`. 

**Example** 

```javascript
obclient> SELECT TO_DAYS('2015-11-04'), TO_DAYS('20151104');
+-----------------------+---------------------+
| TO_DAYS('2015-11-04') | TO_DAYS('20151104') |
+-----------------------+---------------------+
|                736271 |              736271 |
+-----------------------+---------------------+
1 row in set (0.01 sec)
```





#### USEC_TO_TIME 

**Declaration** 

```javascript
USEC_TO_TIME(usec)
```



**Description** 

This function converts the value of `usec` into the `TIMESTAMP` type. 

`usec` specifies the number of microseconds from `1970-01-01 00:00:00.000000`, taking into account the time zone. 

**Example** 

```javascript
obclient> SELECT USEC_TO_TIME(1);
+----------------------------+
| USEC_TO_TIME(1)            |
+----------------------------+
| 1970-01-01 08:00:00.000001 |
+----------------------------+
1 row in set (0.00 sec)
```





#### UNIX_TIMESTAMP 

**Declaration** 

```javascript
UNIX_TIMESTAMP()
UNIX_TIMESTAMP(date)
```



**Description** 

* If `date` is not specified, the number of seconds from '1970-01-01 00:00:00' to the current time is returned, taking into account the time zone.

  




<!-- -->

* If `date` is specified, the number of seconds from '1970-01-01 00:00:00' to the specified time is returned, taking into account the time zone.

  




**Example** 

```javascript
obclient> SELECT UNIX_TIMESTAMP(), TIME_TO_USEC(NOW());
+------------------+---------------------+
| UNIX_TIMESTAMP() | TIME_TO_USEC(NOW()) |
+------------------+---------------------+
|       1525570561 |    1525570561000000 |
+------------------+---------------------+
1 row in set (0.01 sec)

obclient> SELECT UNIX_TIMESTAMP('1997-10-04 22:23:00');
+---------------------------------------+
| UNIX_TIMESTAMP('1997-10-04 22:23:00') |
+---------------------------------------+
|                             875974980 |
+---------------------------------------+
1 row in set (0.01 sec)
```





#### UTC_TIMESTAMP 

**Declaration** 

```javascript
UTC_TIMESTAMP()
```



**Description** 

This function returns the current UTC time. 

**Example** 

```javascript
obclient> SELECT UTC_TIMESTAMP();
+---------------------+
| UTC_TIMESTAMP()     |
+---------------------+
| 2018-05-06 01:38:32 |
+---------------------+
1 row in set (0.01 sec)
```





#### YEAR 

**Declaration** 

```javascript
YEAR(date)
```



**Description** 

This function returns the year of `date`. 

**Example** 

```javascript
obclient> SELECT YEAR('1987-01-01');
+--------------------+
| YEAR('1987-01-01') |
+--------------------+
|               1987 |
+--------------------+
1 row in set (0.00 sec)
```





String functions 
-------------------------

#### CONCAT 

**Declaration** 

```javascript
CONCAT(str1, .., strN)
```



**Description** 

This function concatenates multiple strings into one string. If the parameters include a `NULL` value, the function returns `NULL`. 

**Example** 

```javascript
obclient> SELECT
    -> CONCAT('test','obclient', '1.0'),
    -> CONCAT('test','obclient', NULL)
    -> \G
*************************** 1. row ***************************
CONCAT('test','obclient', '1.0'): testobclient1.0
 CONCAT('test','obclient', NULL): NULL
1 row in set (0.01 sec)
```





#### CONCAT_WS 

**Declaration** 

```javascript
CONCAT_WS(separator, str1, .., strN)
```



**Description** 

This function concatenates multiple strings into one string, with adjacent strings separated with the separator specified for `separator`. If the parameters include a `NULL` value, the `NULL` value is ignored. 

**Example** 

```javascript
obclient> SELECT
    -> CONCAT_WS('_', 'First', 'Second'),
    -> CONCAT_WS('_', 'First', NULL, 'Second')
    -> \G
*************************** 1. row ***************************
      CONCAT_WS('_', 'First', 'Second'): First_Second
CONCAT_WS('_', 'First', NULL, 'Second'): First_Second
1 row in set (0.00 sec)
```





FORMAT

**Declaration** 

```unknow
FORMAT(X,D)
```



**Description** 

This function formats a numeric value X into the format of "#,###,###.##".The formatted value is rounded off to D decimal places and is returned as a string. If the integer part exceeds three digits, a comma is used as the separator at the thousands place. If D is 0, the result has no decimal point or fractional part. 

**Example** 

```unknow
obclient>SELECT FORMAT(12332.123456, 4) from DUAL;
+-------------------------+
| format(12332.123456, 4) |
+-------------------------+
| 12,332.1235             |
+-------------------------+
1 row in set (0.00 sec)

obclient>SELECT FORMAT(12332.1, 4) from DUAL;
+--------------------+
| format(12332.1, 4) |
+--------------------+
| 12,332.1000        |
+--------------------+
1 row in set (0.01 sec)

obclient>SELECT FORMAT(12332.2, 0) from DUAL;
+--------------------+
| format(12332.2, 0) |
+--------------------+
| 12,332             |
+--------------------+
1 row in set (0.00 sec)
```





#### SUBSTR 

**Declaration** 

```javascript
SUBSTR(str, pos)
SUBSTR(str, pos, len)
SUBSTR(str FROM pos)         
SUBSTR(str FROM pos FOR len)
```



**Description** 

This function returns the substring of `str`. The starting position is `pos`, and the length is `len`. If the parameters include a `NULL` value, the function returns `NULL`. 

* If `len` is not specified, the returned substring starts from the `pos` position and ends at `str`.

  




<!-- -->

* If the value of `pos` is negative, the starting position is determined from `str` in inverted order.

  




<!-- -->

* If `len` is less than or equal to 0, or the starting position specified for `POS` is invalid, an empty string is returned.

  




**Example** 

```javascript
obclient> SELECT
    -> SUBSTR('abcdefg', 3),
    -> SUBSTR('abcdefg', 3, 2),
    -> SUBSTR('abcdefg', -3),
    -> SUBSTR('abcdefg', 3, -2),
    -> SUBSTR('abcdefg' from -4 for 2)
    -> \G
*************************** 1. row ***************************
           SUBSTR('abcdefg', 3): cdefg
        SUBSTR('abcdefg', 3, 2): cd
          SUBSTR('abcdefg', -3): efg
       SUBSTR('abcdefg', 3, -2):
SUBSTR('abcdefg' from -4 for 2): de
1 row in set (0.01 sec)
```





#### SUBSTRING 

**Declaration** 

```javascript
SUBSTRING(str, pos)  
SUBSTRING(str, pos, len)         
SUBSTRING(str FROM pos)      
SUBSTRING(str FROM pos FOR len)
```



**Description** 

The same as `SUBSTR`. 



#### TRIM 

**Declaration** 

```javascript
TRIM([[{BOTH | LEADING | TRAILING}] [remstr] FROM] str)
```



**Description** 

This function deletes all prefixes and/or suffixes of a string. The default value is `BOTH`. If the parameters include a `NULL` value, the function returns `NULL`. 

**Example** 

```javascript
obclient> SELECT
    -> TRIM(' bar '),
    -> TRIM(LEADING 'x' FROM 'xxxbarxxx'),
    -> TRIM(BOTH 'x' FROM 'xxxbarxxx'),
    -> TRIM(TRAILING 'x' FROM 'xxxbarxxx')
    -> \G
*************************** 1. row ***************************
                      TRIM(' bar '): bar
 TRIM(LEADING 'x' FROM 'xxxbarxxx'): barxxx
    TRIM(BOTH 'x' FROM 'xxxbarxxx'): bar
TRIM(TRAILING 'x' FROM 'xxxbarxxx'): xxxbar
1 row in set (0.01 sec)
```





#### LTRIM 

**Declaration** 

```javascript
LTRIM(str)
```



**Description** 

This function removes the leading spaces from a string. 



#### RTRIM 

**Declaration** 

```javascript
RTRIM(str)
```



**Description** 

This function removes the trailing spaces from a string. 



#### ASCII 

**Declaration** 

```javascript
ASCII(str)
```



**Description** 

This function returns the ASCII value of the leftmost character in a string. 



#### ORD 

**Declaration** 

```javascript
ORD(str)
```



**Description** 

This function returns the code of the leftmost character in a string. If the leftmost character of a string is a multi-byte character, ORD(str) returns the code of the multi-byte character based on the following formula:

```javascript
(1st byte code)
+ (2nd byte code * 256)
+ (3rd byte code * 256^2) ...
```



**Example** 

```javascript
obclient> SELECT ORD('China');
+---------------+
| ORD ('China') |
+---------------+
|      67 |
+---------------+
1 row in set (0.01 sec)
```





#### LENGTH 

**Declaration** 

```javascript
LENGTH(str)
```



**Description** 

This function returns the length of `str` in bytes. 

**Example** 

```javascript
obclient> SELECT LENGTH('China'), LENGTH('hello');
+------------------+-----------------+
| LENGTH ('China') | LENGTH('hello') |
+------------------+-----------------+
|                5 |               5 |
+------------------+-----------------+
1 row in set (0.01 sec)
```





#### CHAR_LENGTH 

**Declaration** 

```javascript
CHAR_LENGTH(str)
```



**Description** 

This function returns the number of characters in a string. 

**Example** 

```javascript
obclient> SELECT CHAR_LENGTH('world'), CHAR_LENGTH('hello');
+-----------------------+----------------------+
| CHAR_LENGTH('world') | CHAR_LENGTH('hello') |
+-----------------------+----------------------+
|                     5 |                    5 |
+-----------------------+----------------------+
1 row in set (0.00 sec)
```





#### UPPER 

**Declaration** 

```javascript
UPPER(str)
```



**Description** 

This function converts lowercase letters in a string into uppercase letters. 

**Example** 

```javascript
obclient> SELECT UPPER('obclientHello!');
+-----------------------------+
| UPPER('obclientHello!') |
+-----------------------------+
| OCEANBASEHELLO!           |
+-----------------------------+
1 row in set (0.01 sec)
```





#### LOWER 

**Declaration** 

```javascript
LOWER(str)
```



**Description** 

This function converts uppercase letters in a string into lowercase letters. 

**Example** 

```javascript
obclient> SELECT LOWER('obclientHello!');
+-----------------------------+
| LOWER('obclientHello!') |
+-----------------------------+
| obclienthello!           |
+-----------------------------+
1 row in set (0.01 sec)
```





#### HEX 

**Declaration** 

```javascript
HEX(str)
```



**Description** 

This function converts a number or string into a hexadecimal string. 

**Example** 

```javascript
obclient> SELECT HEX(255), HEX('abc');
+----------+------------+
| HEX(255) | HEX('abc') |
+----------+------------+
| FF       | 616263     |
+----------+------------+
1 row in set (0.00 sec)
```





#### UNHEX 

**Declaration** 

```javascript
UNHEX(str)
```



**Description** 

This function converts a hexadecimal string to a normal string. 

**Example** 

```javascript
obclient> SELECT UNHEX('4f6365616e42617365');
+-----------------------------+
| UNHEX('4f6365616e42617365') |
+-----------------------------+
| obclient                   |
+-----------------------------+
1 row in set (0.00 sec)
```





#### MD5 

**Declaration** 

```javascript
MD5(str)
```



**Description** 

This function returns the MD5 value of the specified string. 

**Example** 

```javascript
obclient> SELECT MD5(1);
+----------------------------------+
| MD5(1)                           |
+----------------------------------+
| c4ca4238a0b923820dcc509a6f75849b |
+----------------------------------+
1 row in set (0.00 sec)
```





#### INT2IP 

**Declaration** 

```javascript
INT2IP(int_value)
```



**Description** 

This function converts an integer internal code into an IP address. 

**Example** 

```javascript
obclient> SELECT
    -> INT2IP(16777216),
    -> HEX(16777216),
    -> INT2IP(1)
    -> \G
*************************** 1. row ***************************
INT2IP(16777216): 1.0.0.0
   HEX(16777216): 1,000,000
       INT2IP(1): 0.0.0.1
1 row in set (0.01 sec)
```





#### IP2INT 

**Declaration** 

```javascript
IP2INT('ip_addr')
```



**Description** 

This function converts an IP address into an integer internal code. 

**Example** 

```javascript
obclient> SELECT
    -> IP2INT('0.0.0.1'),
    -> HEX(IP2INT('0.0.0.1')),
    -> HEX(IP2INT('1.0.0.0'))
    -> \G
*************************** 1. row ***************************
     IP2INT('0.0.0.1'): 1
HEX(IP2INT('0.0.0.1')): 1
HEX(IP2INT('1.0.0.0')): 1000000
1 row in set (0.01 sec)
```





#### LIKE 

**Declaration** 

```javascript
str1 [NOT] LIKE str2 [ESCAPE str3]
```



**Description** 

This function matches a string with wildcard characters. If the parameters include a `NULL` value, the function returns `NULL`. 

Wildcard characters include:

* `%`: matches a string of any length.

  




<!-- -->

* `_`: matches a single character.

  




ESCAPE is used to define the escape characters. If str2 contains str3, the characters after str3 are taken as ordinary characters during matching. 

**Example** 

```javascript
obclient> SELECT 'ab%' LIKE 'abc%' ESCAPE 'c';
+------------------------------+
| 'ab%' LIKE 'abc%' ESCAPE 'c' |
+------------------------------+
|                            1 |
+------------------------------+
1 row in set (0.01 sec)
```





#### REGEXP 

**Declaration** 

```javascript
str [NOT] REGEXP | RLIKE pat
```



**Description** 

This function is used for regex matching. If the parameters include a `NULL` value, the function returns `NULL`. 

**Example** 

```javascript
obclient> SELECT
    -> 1234 REGEXP 1,
    -> 'hello' RLIKE 'h%'
    -> \G
*************************** 1. row ***************************
     1234 REGEXP 1: 1
'hello' RLIKE 'h%': 0
1 row in set (0.01 sec)
```





#### REPEAT 

**Declaration** 

```javascript
REPEAT(str, count)
```



**Description** 

This function returns the string of `str` after repeating for `count` times. When `count` is less than or equal to 0, an empty string is returned. If the parameters include a `NULL` value, the function returns `NULL`. 

**Example** 

```javascript
obclient> SELECT
    -> REPEAT('1', -1),
    -> REPEAT(null, null),
    -> REPEAT('Abc', 4)
    -> \G
*************************** 1. row ***************************
   REPEAT('1', -1):
REPEAT(null, null): NULL
  REPEAT('Abc', 4): AbcAbcAbcAbc
1 row in set (0.01 sec)
```





#### SPACE 

**Declaration** 

```javascript
SPACE(N)
```



**Description** 

This function returns a string with `N` spaces. 



#### SUBSTRING_INDEX 

**Declaration** 

```javascript
SUBSTRING_INDEX(str, delim, count)
```



**Description** 

This function returns a string from str before delim and count appear. If count is a positive value, the content on the left of the final delimiter (starting from the left) is returned. If count is a negative value, the content on the right of the delimiter (starting from the right) is returned. If any parameter is NULL, NULL is returned. If str or delim is an empty string, an empty string is returned. If count is 0, an empty string is returned. 

*str, delim, and count support implicit conversion between numeric values and strings.* 

**Example** 

```javascript
obclient>select substring_index('abcdabc', 'abc', 0), substring_index('abcdabc', 'abc', 1), substring_index('abcdabc', 'abc', 2), substring_index('abcdabc', 'abc', 3), substring_index('abcdabc', 'abc', -1), substring_index('abcdabc', 'abc', -2), substring_index('abcdabc', 'abc', -3)\G;
    * 1. row *
     substring_index('abcdabc', 'abc', 0):
     substring_index('abcdabc', 'abc', 1):
     substring_index('abcdabc', 'abc', 2): abcd
     substring_index('abcdabc', 'abc', 3): abcdabc
    substring_index('abcdabc', 'abc', -1):
    substring_index('abcdabc', 'abc', -2): dabc
    substring_index('abcdabc', 'abc', -3): abcdabc
    1 row in set (0.00 sec)
```





#### LOCATE 

**Declaration** 

`LOCATE(substr,str) , LOCATE(substr,str,pos)`

**Description** 

The first syntax returns the position of the first occurrence of substr in str. The second syntax returns the position of the first occurrence of substr in str, and the starting position is pos. If substr is not in str, 0 is returned. 

**Example** 

```javascript
obclient>SELECT LOCATE('bar', 'foobarbar');
        -> 4
obclient>SELECT LOCATE('xbar', 'foobar');
        -> 0
obclient>SELECT LOCATE('bar', 'foobarbar',5);
        -> 7
```





#### POSITION 

**Declaration** 

`POSITION(substr IN str)`

**Description** 

This function is the same as LOCATE. 



#### INSTR 

**Declaration** 

`INSTR(str,substr)`

**Description** 

This function returns the position of the first occurrence of a substring in str. It is the same as the LOCATE() function with two parameters, unless the parameter sequence is reversed. 

**Example** 

```javascript
obclient>SELECT INSTR('foobarbar', 'bar');
        -> 4
obclient>SELECT INSTR('xbar', 'foobar');
        -> 0
```





#### REPLACE 

**Declaration** 

`REPLACE(str, from_str, to_str)`

**Description** 

This function returns the str string with all occurrences of the from_str string replaced by the to_str string. 

**Example** 

```javascript
obclient>SELECT REPLACE('abc.efg.gpg.nowdew.abc.dabc.e', 'abc.', 'www');
+---------------------------------------------------------+
| REPLACE('abc.efg.gpg.nowdew.abc.dabc.e', 'abc.', 'www') |
+---------------------------------------------------------+
| wwwefg.gpg.nowdew.wwwdwwwe                              |
+---------------------------------------------------------+
1 row in set (0.00 sec)
```





#### FIELD 

**Declaration** 

`FIELD(str,str1,str2,str3,...)`

**Description** 

This function returns the index position (starting from str1) of str in the list of str1, str2, str3, ... If str is not found, 0 is returned. 

If all FIELD() parameters are strings, all parameters are compared as strings. If all parameters are numbers, the parameters are compared as numbers. Otherwise, the parameters are compared as double. 

If str is NULL, the return value is 0. This is because NULL is neither equal to nor unequal to any value. FILED() is the complement of ELT(). 

**Example** 

```javascript
obclient>select field('abc','abc1','abc2','abc','abc4','abc'), field(NULL, 'null1', NULL);
+-----------------------------------------------+----------------------------+
| field('abc','abc1','abc2','abc','abc4','abc') | field(NULL, 'null1', NULL) |
+-----------------------------------------------+----------------------------+
|                   3 |                          0 |
+-----------------------------------------------+----------------------------+
1 row in set (0.00 sec)
```





#### ELT 

**Declaration** 

`ELT(N, str1, str2, str3,...)`

**Description** 

If N = 1, the return value is str1. If N = 2, the return value is str2, and so forth. If N is less than 1 or greater than the number of parameters, NULL is returned. ELT() is the complement of FIELD(). 

**Example** 

```javascript
obclient>select elt(3, 'abc1', 'abc2', 'abc', 'abc4', 'abc'), elt(0, 'null1', NULL);
+----------------------------------------------+-----------------------+
| elt(3, 'abc1', 'abc2', 'abc', 'abc4', 'abc') | elt(0, 'null1', NULL) |
+----------------------------------------------+-----------------------+
| abc                                          | NULL                  |
+----------------------------------------------+-----------------------+
1 row in set (0.00 sec)
```





#### INSERT 

**Declaration** 

`INSERT (str1,pos,len,str2)`

**Description** 

This function returns the str1 string, which starts from pos. Substrings with a length of len are replaced with str2. If pos exceeds the string length, the original string is returned. If len is greater than the length of other strings, the substring starting from the position pos is replaced. If any parameter is NULL, NULL is returned. This function supports multi-byte characters. 

* *str1 and str2 must be strings, and pos and len must be integers. If any parameter is NULL, the result is always NULL.* 




<!-- -->

* *The characters in str1 and str2 are considered as byte streams.* 




<!-- -->

* *If pos is a negative value or exceeds the length of str1, str1 is returned.* 




<!-- -->

* When len is less than 0 or exceeds the length of str, a combined string of str1 from the beginning to pos and str2 is returned.

  




**Example** 

```javascript
obclient>select insert('Quadratic',-2,100,'What'), insert('Quadratic',7,3,'What'),
    -> insert('Quadratic',-1,3,'What'), insert('Quadratic',10,3,'What'), insert('Quadratic',5,-1,''),
    -> insert('Quadratic',7,-1,'What')\G;
* 1. row *
insert('Quadratic',-2,100,'What'): Quadratic
   insert('Quadratic',7,3,'What'): QuadraWhat
  insert('Quadratic',-1,3,'What'): Quadratic
  insert('Quadratic',10,3,'What'): Quadratic
      insert('Quadratic',5,-1,''): Quad
  insert('Quadratic',7,-1,'What'): QuadraWhat
1 row in set (0.01 sec)
```





#### LPAD 

**Declaration** 

`LPAD(str, len, padstr)`

**Description** 

This function fills the string specified for padstr into the left side of str to the length specified for len. If the length of str exceeds len, str is truncated. 

**Example** 

```javascript
obclient > SELECT LPAD('hi',4,'??');
+-------------------+
| LPAD('hi',4,'??') |
+-------------------+
| ??hi              |
+-------------------+
1 row in set (0.01 sec)

obclient > SELECT LPAD('hi',1,'??');
+-------------------+
| LPAD('hi',1,'??') |
+-------------------+
| h                 |
+-------------------+
1 row in set (0.00 sec)
```





#### RPAD 

**Declaration** 

`RPAD(str, len, padstr)`

**Description** 

This function fills the string specified for padstr into the right side of str to the length specified for len. If the length of str exceeds len, str is truncated. 

**Example** 

```javascript
obclient> SELECT RPAD('hi',4,'??');
+-------------------+
| RPAD('hi',4,'??') |
+-------------------+
| hi??              |
+-------------------+
1 row in set (0.00 sec)

obclient> SELECT RPAD('hi',1,'??');
+-------------------+
| RPAD('hi',1,'??') |
+-------------------+
| h                 |
+-------------------+
1 row in set (0.00 sec)
```





#### UUID 

**Declaration** 

`uuid()`

**Description** 

This function generates a globally unique ID. 

**Example** 

```javascript
obclient> select uuid();
+--------------------------------------+
| uuid()                               |
+--------------------------------------+
| f756a1f6-4de6-11e8-90af-90b11c53e421 |
+--------------------------------------+
1 row in set (0.00 sec)
```





#### BIN 

**Declaration** 

`bin(N)`

**Description** 

This function returns the binary form of the number N. 

**Example** 

```javascript
obclient > SELECT BIN(12);
+---------+
| BIN(12) |
+---------+
| 1100    |
+---------+
1 row in set (0.00 sec)
```





#### QUOTE 

**Declaration** 

`quote(str)`

**Description** 

This function quotes a string to generate a result that can be used as a properly escaped value in an SQL statement. The returned string is enclosed by single quotation marks (''). Each instance of backslash (\\), single quote ('), ASCII NUL, and Control-Z is preceded by a backslash. If a parameter is NULL, the return value is 'NULL' without single quotation marks. 

**Example** 

```javascript
obclient > SELECT QUOTE('Don\'t!');
+------------------+
| QUOTE('Don\'t!') |
+------------------+
| 'Don\'t!'        |
+------------------+
1 row in set (0.00 sec)

obclient > SELECT QUOTE(NULL);
+-------------+
| QUOTE(NULL) |
+-------------+
| NULL        |
+-------------+
1 row in set (0.00 sec)
```





#### REGEXP_SUBSTR 

**Declaration** 

`regexp_substr(str,pattern,[position[,occurrence[,match_param[,subexpr]]]])`

**Description** 

This function searches in the str string for the substring that matches the regular expression specified for pattern, and returns NULL if the substring does not exist. This function supports multi-byte characters. NULL is returned if any other parameter except match_param is NULL. 

* str specifies the string to be searched. Multi-byte characters are supported.

  




<!-- -->

* pattern specifies a regular expression. The regular expression rules are compatible with the MySQL database.

  




<!-- -->

* position (optional) specifies the starting position for the search. The value must be a positive integer, and an error is returned if the value is less than or equal to 0. NULL is returned if NULL is input. The default value is 1, which specifies to search from the first character.

  




<!-- -->

* occurrence (optional) specifies the ordinal number of occurrence at which the matched value is to be returned. The value must be a positive integer, and an error is returned if the value is less than or equal to 0. NULL is returned if NULL is input. The default value is 1, which specifies to return the first matched result.

  




<!-- -->

* match_param (optional) specifies the search parameter. The value is a string. Only two characters 'i' and 'c' are supported. i indicates case-insensitive and c indicates case-sensitive. An error message is returned for other characters. The default value depends on the collection of the character set of str. NULL specifies to use the default value.

  




<!-- -->

* subexpr (optional) specifies the ordinal number of the group in the regular expression whose value is to be returned. The value is an integer greater than or equal to 0. An error is returned if the value is less than 0. The default value is 0, which means to return the substring that matches the regular expression specified for pattern.

  






**Example** 

```javascript
obclient> select regexp_substr('I have 2 apples and 100 bucks!', '[[:blank:]][[:alnum:]]*', 1, 1) from dual;
+----------------------------------------------------------------------------------+
| regexp_substr('I have 2 apples and 100 bucks!', '[[:blank:]][[:alnum:]]*', 1, 1) |
+----------------------------------------------------------------------------------+
|  have                                                                            |
+----------------------------------------------------------------------------------+
1 row in set (0.00 sec)

obclient> select regexp_substr('foothebar', 'foo(.*)(bar)', 1, 1, 'c', 1) from dual;
+----------------------------------------------------------+
| regexp_substr('foothebar', 'foo(.*)(bar)', 1, 1, 'c', 1) |
+----------------------------------------------------------+
| the                                                      |
+----------------------------------------------------------+
1 row in set (0.01 sec)
```





Conversion functions 
-----------------------------

#### CAST 

**Declaration** 

`CAST(expr AS type)`

**Description** 

This function explicitly converts the data type of an expression to another. 

It converts the expr field value into the type data type. 

**Parameter description** :



* expr: specifies a valid SQL expression.

  

* AS: separates two parameters. The value before AS specifies the data to be processed, and the value after AS specifies the target data type.

  

* type: specifies the data type provided by the target system. Valid values:

  






You can use the CAST function to convert data types when at least one of the following conditions is met.

* The data types of the two expressions are the same.

  




<!-- -->

* The two expressions can be implicitly converted.

  




<!-- -->

* The data type must be converted explicitly.

  




If you attempt to make an unacceptable conversion, OceanBase Database returns an error message. 

If the data type length is not specified, the maximum length in the OceanBase Database system is used. For example, the maximum length of the VARCHAR data type is 262,143 bytes, and the NUMBER data type has a floating precision of 65 bits. 

This function supports the operation on signed and unsigned 64-bit values. If you are using a numeric operator (for example, +) and one of the operands is an unsigned integer, the result is unsigned. You can use the SIGNED and UNSIGNED cast operators to overwrite it. In this way, the operation is assigned to signed or unsigned 64-bit integers. 

If an operand is a floating-point value, the result is a floating-point value. 

**Example** 

```javascript
obclient>SELECT CAST(123 AS BOOL);
+-------------------+
| CAST(123 AS bool) |
+-------------------+
|                 1 |
+-------------------+
1 row in set (0.00 sec)

obclient>select cast(1-2 as unsigned), cast(cast(1-2 as unsigned) as signed);
+-----------------------+---------------------------------------+
| cast(1-2 as unsigned) | cast(cast(1-2 as unsigned) as signed) |
+-----------------------+---------------------------------------+
|  18446744073709551615 |                                    -1 |
+-----------------------+---------------------------------------+
1 row in set (0.00 sec)

obclient>SELECT CAST(1 AS UNSIGNED) - 2.0;
+---------------------------+
| CAST(1 AS UNSIGNED) - 2.0 |
+---------------------------+
| -1.0 |
+---------------------------+
1 row in set (0.00 sec)

obclient>select cast(0 as date);
+-----------------+
| cast(0 as date) |
+-----------------+
| 0000-00-00      |
+-----------------+
1 row in set (0.00 sec)
```





Mathematical functions 
-------------------------------

#### ROUND 

**Declaration** 

`ROUND(X), ROUND(X,D)`

**Description** 

This function rounds off a returned value to the specified length or precision. 

The returned value X approximates to the nearest integer. Given two parameters, the returned value X is rounded off to D places to the right of the decimal point. To reserve X to D places to the left of the decimal point, set D to negative. 

The return value is of the same type as that of the first independent variable (assuming that it is an integer, double-precision floating-point number, or decimal). This means that for an integer parameter, the result is also an integer (no fractional part). 

* For exact-value numbers, ROUND() complies with the rule of "round half away from zero" or "round toward nearest". For a value whose fractional part is 0.5 or greater than 0.5, the value is rounded up to the nearest integer if it is positive and rounded down to the nearest integer if it is negative.In other words, the value is rounded away from zero. For a value whose fractional part is less than 0.5, the value is rounded down to the nearest integer if it is positive and rounded up to the nearest integer if it is negative.

  




<!-- -->

* For approximate-value numbers, ROUND() complies with the rule of "round to nearest even": A value whose fractional part is exactly halfway between two integers is rounded to the nearest even integer.

  






**Example** 

```javascript
obclient>select round(2.15,2);
+---------------+
| round(2.15,2) |
+---------------+
|          2.15 |
+---------------+
1 row in set (0.00 sec)

obclient>select round(2555e-2,1);
+------------------+
| round(2555e-2,1) |
+------------------+
|             25.6 |
+------------------+
1 row in set (0.01 sec)

obclient>select round(25e-1), round(25.3e-1),round(35e-1);
+--------------+----------------+--------------+
| round(25e-1) | round(25.3e-1) | round(35e-1) |
+--------------+----------------+--------------+
|            3 |              3 |            4 |
+--------------+----------------+--------------+
1 row in set (0.00 sec)
```





#### CEIL 

**Declaration** 

`CEIL(expr)`

**Description** 

This function returns the smallest integer that is greater than or equal to the specified expression. 

Comparison operation is also supported. The comparison result is a Boolean value, which is converted to a numeric value. The result is 1 (TRUE) or 0 (FALSE).

If you enter NULL, the return value is NULL. 

If you enter a string of digits, it can be automatically converted to a numeric value. 

The return value is converted to a BIGINT value. 

**Example** 

```javascript
obclient>select ceil(1.2), ceil(-1.2), ceil(1+1.5), ceil(1=1),ceil(1<1),ceil(null);
+-----------+------------+-------------+-----------+-----------+------------+
| ceil(1.2) | ceil(-1.2) | ceil(1+1.5) | ceil(1=1) | ceil(1<1) | ceil(null) |
+-----------+------------+-------------+-----------+-----------+------------+
|         2 |         -1  |           3  |         1 |         0 |       NULL |
+-----------+------------+-------------+-----------+-----------+------------+
1 row in set (0.00 sec)

obclient>select ceil(name);
ERROR 1166 (42703): Unkown column name 'name'

obclient>select ceil('2');
+-----------+
| ceil('2') |
+-----------+
|         2 |
+-----------+
1 row in set (0.00 sec)
```





#### FLOOR 

**Declaration** 

`FLOOR(expr)`

**Description** 

This function is similar to the CEIL(expr) function, and returns the maximum integer smaller than or equal to the specified expression. 

Comparison operation is also supported. The comparison result is a Boolean value, which is converted to a numeric value. The result is 1 (TRUE) or 0 (FALSE).

If you enter NULL, the return value is NULL. 

If you enter a string of digits, it can be automatically converted to a numeric value. 

The return value is converted to a BIGINT value. 

**Example** 

```javascript
obclient>select floor(1.2), floor(-1.2), floor(1+1.5), floor(1=1),floor(1<1),floor(null);
+------------+-------------+--------------+------------+------------+-------------+
| floor(1.2) | floor(-1.2) | floor(1+1.5) | floor(1=1) | floor(1<1) | floor(null) |
+------------+-------------+--------------+------------+------------+-------------+
|                                  |               1 |          140 |
+------------+-------------+--------------+------------+------------+-------------+
1 row in set (0.00 sec)

obclient>select floor(name);
ERROR 1166 (42703): Unkown column name 'name'

obclient>select floor('2');
+------------+
| floor('2') |
+------------+
|          2 |
+------------+
1 row in set (0.00 sec)
```





#### ABS 

**Declaration** 

`ABS(expr)`

**Description** 

This function returns the absolute value of an expression. The return value type is the same as the data type of the numeric expression. 

Comparison operation is also supported. The comparison result is a Boolean value, which is converted to a numeric value. The result is 1 (TRUE) or 0 (FALSE).

If you enter NULL, the return value is NULL. 

If you enter a string of digits, it can be automatically converted to a numeric value. 

The return value is converted to a BIGINT value. 

**Example** 

```javascript
obclient>select abs(5), abs(-5.777), abs(0), abs(1/2), abs(1-5);
+--------+-------------+--------+----------+----------+
| abs(5) | abs(-5.777) | abs(0) | abs(1/2) | abs(1-5) |
+--------+-------------+--------+----------+----------+
| 5 | 5.777 | 0 | 0.5000 | 4 |
+--------+-------------+--------+----------+----------+
1 row in set (0.00 sec)
```





#### NEG 

**Declaration** 

`NEG(expr)`

**Description** 

This function performs the complement operation on the operand. It subtracts the operand from zero and then returns the result. 

Comparison operation is also supported. The comparison result is a Boolean value, which is converted to a numeric value. The result is 1 (TRUE) or 0 (FALSE). The complement operation is then performed on the result. 

**Example** 

```javascript
obclient>select neg(1), neg(1+1), neg(2*3), neg(1=1), neg(5<1);
+--------+----------+----------+----------+----------+
| neg(1) | neg(1+1) | neg(2*3) | neg(1=1) | neg(5<1) |
+--------+----------+----------+----------+----------+
|     -1 |       -2 |       -6 |       -1 |        0 |
+--------+----------+----------+----------+----------+
1 row in set (0.01 sec)
```





#### SIGN 

**Declaration** 

`SIGN(X)`

**Description** 

SIGN(X) returns the sign of a parameter as --1, 0, or 1, depending on the value of X. A negative value corresponds to the sign of --1 and a positive value corresponds to 1. 

Comparison operation is also supported. The comparison result is a Boolean value, which is converted to a numeric value. The result is 1 (TRUE) or 0 (FALSE).

If you enter NULL, the return value is NULL. 

Floating-point numbers and hexadecimal numbers are supported. 

**Example** 

```javascript
obclient>SELECT SIGN(-32), SIGN(0), SIGN(234);
+-----------+---------+-----------+
| SIGN(-32) | SIGN(0) | SIGN(234) |
+-----------+---------+-----------+
|        -1 |       0 |         1 |
+-----------+---------+-----------+
1 row in set (0.01 sec)

obclient>select sign(null),sign(false),sign(0x01);
+------------+-------------+------------+
| sign(null) | sign(false) | sign(0x01) |
+------------+-------------+------------+
|       NULL |           0 |          1 |
+------------+-------------+------------+
1 row in set (0.00 sec)
```





#### CONV 

**Declaration** 

`CONV(N, from_base, to_base)`

**Description** 

This function converts numbers of one number base to another. The return value is a string converted from from_base to to_base. Input parameter N can be an integer or string. The minimum base is 2 and the maximum base is 36. N is considered a signed number if to_base is a negative number. Otherwise, N is considered an unsigned number. If from_base is a negative number, N is considered an integer, and the sign is ignored. The N parameter supports only the int and string types. The from_base and to_base parameters support only the decimal int type, and the value range is \[--36,--2\] U \[2,36\]. 

Invalid inputs will cause errors. Invalid inputs include:

* *The from_base or to_base is not of the valid decimal int type.* 




<!-- -->

* *The from_base or to_base exceeds the value range of \[--36,--2\] U \[2,36\].* 




<!-- -->

* N is not a valid numeric value. For example, the value is beyond the ranges of 0 to 9, a to z, and A to Z.

  




<!-- -->

* N is beyond the value range of from_base. For example from_base is 2, but N is 3.

  




<!-- -->

* N exceeds the maximum value range of int64: \[--9223372036854775807,9223372036854775807\].

  




**Example** 

```javascript
obclient>select conv(9223372036854775807,10,2);
+-----------------------------------------------------------------+
| conv(9223372036854775807,10,2) |
+-----------------------------------------------------------------+
| 111111111111111111111111111111111111111111111111111111111111111 |
+-----------------------------------------------------------------+
1 row in set (0.00 sec)

obclient>select conv('-acc',21,-7);
+--------------------+
| conv('-acc',21,-7) |
+--------------------+
| -16425 |
+--------------------+
1 row in set (0.00 sec)
```





#### MOD 

**Declaration** 

`MOD(N,M)`

**Description** 

This function returns the remainder of a number divided by another number. MOD(N,M), N % M, and N MOD M are equivalent. 

MOD() works also for numeric values with a fractional part and returns the exact remainder after the division operation. 

If either N or M is NULL, the return value is NULL. If M is 0, the return value is also 0. 

**Example** 

```javascript
obclient>select mod(29,19), 29 mod 19, 29 % 19;
+------------+-----------+---------+
| mod(29,19) | 29 mod 19 | 29 % 19 |
+------------+-----------+---------+
|         10 |        10 |      10 |
+------------+-----------+---------+
1 row in set (0.00 sec)
```





#### POW 

**Declaration** 

`POW(X,Y)`

**Description** 

This function returns the result of raising X to the power of Y. 

If either X or Y is NULL, the return value is NULL. 

**Example** 

```javascript
obclient>select pow(4,2), pow(4,-2), pow(1,null);
+----------+-----------+-------------+
| pow(4,2) | pow(4,-2) | pow(1,null) |
+----------+-----------+-------------+
|       16 |    0.0625 |        NULL |
+----------+-----------+-------------+
1 row in set (0.00 sec)
```





#### POWER 

**Declaration** 

`POWER(X,Y)`

**Description** 

POWER(X,Y) and POW(X,Y) are synonymous functions. 



#### RAND 

**Declaration** 

`rand([N])`

**Description** 

The RAND(\[N\]) function accepts zero or one argument (N is called the random number seed) and returns a random floating-point number within the range of \[0,1.0). To obtain a random integer in the range of \[I, j), use the expression FLOOR(I + RAND() \* (j - i)). 

If the argument N is not specified, random number seed initialization is performed before the function is executed. Then, RAND() generates a random number based on this initial value. RAND() generates a different random number sequence each time. 

If the argument N is specified, N is used as a seed to generate random numbers. Random values are generated based on whether N is a constant:

* If N is a constant, N is initialized as a random number seed before execution. Then, RAND(N) generates a random number based on this initial value. The same N value will generate the same random number sequence.

  




<!-- -->

* If N is a variable (for example, a column value), N is used as a random number seed to generate random numbers in each execution. The same N value will generate the same random number.

  






In addition to SECLET statements, RAND(\[N\]) is also used in the WHERE, ORDER BY, and GROUP BY clauses and executed based on the preceding rules. For example, to randomly sort data in a table, run the following SQL statement: select from t1 order by rand(). To randomly sample 100 rows from a table, run the following SQL statement: select from t1 order by rand() limit 100. 

**Example** 

```javascript
obclient> select a, b, rand() from t3;
+------+------+---------------------+
| a    | b    | rand()              |
+------+------+---------------------+
|    1 |    1 |   0.641815407799385 |
|    2 |    2 | 0.16825051248841966 |
|    3 |    3 |  0.9158063697775886 |
+------+------+---------------------+
3 rows in set (0.00 sec)

obclient> select a, B, rand() from t3;
+------+------+---------------------+
| a    | b    | rand()              |
+------+------+---------------------+
|    1 |    1 | 0.07428034215632857 |
|    2 |    2 |  0.6239826321825224 |
|    3 |    3 |   0.897072165177271 |
+------+------+---------------------+
3 rows in set (0.00 sec)

obclient> select a, B, rand(3) from t3;
+------+------+---------------------+
| a    | b    | rand(3)             |
+------+------+---------------------+
|    1 |    1 |  0.9057697559760601 |
|    2 |    2 | 0.37307905813034536 |
|    3 |    3 | 0.14808605345719125 |
+------+------+---------------------+
3 rows in set (0.00 sec)

obclient> select a, b, rand(3) from t3;
+------+------+---------------------+
| a    | b    | rand(3)             |
+------+------+---------------------+
|    1 |    1 |  0.9057697559760601 |
|    2 |    2 | 0.37307905813034536 |
|    3 |    3 | 0.14808605345719125 |
+------+------+---------------------+
3 rows in set (0.00 sec)

obclient> select a, B, rand(a), rand( B) from t3;
+------+------+---------------------+---------------------+
| a    | b    | rand(a)             | rand(b)             |
+------+------+---------------------+---------------------+
|    1 |    1 | 0.40540353712197724 | 0.40540353712197724 |
|    2 |    2 |  0.6555866465490187 |  0.6555866465490187 |
|    3 |    3 |  0.9057697559760601 |  0.9057697559760601 |
+------+------+---------------------+---------------------+
3 rows in set (0.00 sec)
```





Comparison functions 
-----------------------------

#### GREATEST 

**Declaration** 

`GREATEST(value1, ...)`

**Description** 

This function returns the maximum parameter value and is opposite to the LEAST() function. 

At least two parameters are required. If one parameter is NULL, the return value is NULL. 

If a parameter contains both a numeric value and a character, the character is implicitly converted into a numeric value. An error is returned if the conversion fails. 

**Example** 

```javascript
obclient>select greatest(2,1), greatest('2',1,0), greatest('a','b','c'), greatest('a', NULL, 'c'), greatest('2014-05-15','2014-06-01')\G
    * 1. row *
                          greatest(2,1): 2
                      greatest('2',1,0): 2
                  greatest('a',' B ','c'): c
               greatest('a', NULL, 'c'): NULL
    greatest('2014-05-15','2014-06-01'): 2014-06-01
    1 row in set (0.01 sec)
    obclient>select greatest(2);
    ERROR 1582 (42000): Incorrect parameter count in the call to native function 'greatest'
```





#### LEAST 

**Declaration** 

`LEAST(value1, ...)`

**Description** 

This function returns the minimum parameter value and is opposite to the GREATEST() function. 

At least two parameters are required. If any parameter is NULL, the return value is NULL. 

If a parameter contains both a numeric value and a character, the character is implicitly converted into a numeric value. An error is returned if the conversion fails. 

**Example** 

```javascript
obclient>select least(2, null), least('2',4,9), least('a','b','c'), least('a',NULL,'c'), least('2014-05-15','2014-06-01')\G;
* 1. row *
                      least(2, null): NULL
                      least('2',4,9): 2
                  least('a',' B ','c'): a
                 least('a',NULL,'c'): NULL
least('2014-05-15','2014-06-01'): 2014-05-15
1 row in set (0.01 sec)
obclient>select least(2);
ERROR 1582 (42000): Incorrect parameter count in the call to native function 'least'
```





#### ISNULL 

**Declaration** 

`ISNULL(expr)`

**Description** 

If the expr parameter is NULL, the return value of the ISNULL() function is 1. Otherwise, the return value is 0. 

The ISNULL() function can be used to replace the equivalent (=) comparison for NULL, because NULL is neither equal to a value nor unequal to it. The ISNULL() function has some of the same features as the IS NULL comparison operators. 

**Example** 

```javascript
obclient>SELECT ISNULL(null), ISNULL('test'), ISNULL(123.456), ISNULL('10:00');
+--------------+----------------+-----------------+-----------------+
| ISNULL(null) | ISNULL('test') | ISNULL(123.456) | ISNULL('10:00') |
+--------------+----------------+-----------------+-----------------+
|            1 |              0 |               0 |               0 |
+--------------+----------------+-----------------+-----------------+
1 row in set (0.01 sec)

obclient>SELECT ISNULL(null+1);
+----------------+
| ISNULL(null+1) |
+----------------+
|              1 |
+----------------+
1 row in set (0.00 sec)
```





Process control functions 
----------------------------------

#### CASE 

**Declaration** 

```javascript
CASE value WHEN [compare-value] THEN result [WHEN [compare-value] THEN result ...] [ELSE result] END
OR
CASE WHEN [condition] THEN result [WHEN [condition] THEN result ...] [ELSE result] END
```



**Description** 

In the returned result of the first case, value = compare-value. The prerequisite of the returned result of the second case is that the first condition is true. If no matching result exists, the returned result is the result after the ELSE operation. If no ELSE operation is involved, the return value is NULL. 

**Example** 

```javascript
obclient>select CASE 'b' when 'a' then 1 when 'b' then 2 END;
+----------------------------------------------+
| CASE 'b' when 'a' then 1 when 'b' then 2 END |
+----------------------------------------------+
|                                            2 |
+----------------------------------------------+
1 row in set (0.01 sec)

obclient>select CASE concat('a','b') when concat('ab','') then 'a' when 'b' then 'b' end;
+--------------------------------------------------------------------------+
| CASE concat('a','b') when concat('ab','') then 'a' when 'b' then 'b' end |
+--------------------------------------------------------------------------+
| a                                                                        |
+--------------------------------------------------------------------------+
1 row in set (0.01 sec)

obclient>select case when 1>0 then 'true' else 'false' end;
+--------------------------------------------+
| case when 1>0 then 'true' else 'false' end |
+--------------------------------------------+
| true                                       |
+--------------------------------------------+
1 row in set (0.00 sec)
```





#### IF 

**Declaration** 

`IF(expr1,expr2,expr3)`

**Description** 

If the value of expr1 is TRUE (expr1\<\>0 and expr1\<\>NULL), the return result is expr2. Otherwise, the return result is expr3. 

The return result of IF() can be a numeric value or string value, depending on the content. 

If only one of expr2 and expr3 is NULL, the result of IF() is a non-NULL expression. 

**Example** 

```javascript
obclient>select if(5>6, 'T','F'), if (5>6, 1, 0), if(null, 'True', 'False'), if(0, 'True', 'False')\G
* 1. row *
         if(5>6, 'T','F'): F
           if (5>6, 1, 0): 0
if(null, 'True', 'False'): False
   if(0, 'True', 'False'): False
1 row in set (0.01 sec)
```





#### IFNULL 

**Declaration** 

`IFNULL(expr1, expr2)`

**Description** 

Assume that expr1 is not NULL. The return value of IFNULL() is expr1. Otherwise, its return value is expr2. The return value of IFNULL() is a numeric value or a string, depending on the context. 

The default return value type of IFNULL() is determined based on the following rules.


|                          Expression                           |  Return value  |
|---------------------------------------------------------------|----------------|
| The return value of expr1 or expr2 is a string.               | String         |
| The return value of expr1 or expr2 is a floating-point value. | Floating point |
| The return value of expr1 or expr2 is an integer.             | Integer        |



If both expr1 and expr2 are strings, and either of them is case-sensitive, the return result is case-sensitive. 

**Example** 

```javascript
obclient>SELECT IFNULL('abc', null), IFNULL(NULL+1, NULL+2), IFNULL(1/0, 0/1);
+---------------------+------------------------+------------------+
| IFNULL('abc', null) | IFNULL(NULL+1, NULL+2) | IFNULL(1/0, 0/1) |
+---------------------+------------------------+------------------+
| abc                 |                   NULL |           0.0000 |
+---------------------+------------------------+------------------+
1 row in set (0.01 sec)
```





#### NULLIF 

**Declaration** 

`NULLIF(expr1, expr2)`

**Description** 

If expr1 = expr2, the return value is NULL. Otherwise, the return value is expr1. It is the same as CASE WHEN 

*expr1 = expr2 THEN NULL ELSE expr1 END. Note that if the parameters are not equal, the value of the two calculations is expr1.* 

**Example** 

```javascript
obclient>SELECT NULLIF('ABC', 123), NULLIF('123',123), NULLIF(NULL, 'abc');
+--------------------+-------------------+---------------------+
| NULLIF('ABC', 123) | NULLIF('123',123) | NULLIF(NULL, 'abc') |
+--------------------+-------------------+---------------------+
| ABC                | NULL              | NULL                |
+--------------------+-------------------+---------------------+
1 row in set, 1 warning (0.01 sec)
```





#### ORA_DECODE 

**Declaration** 

`ora_decode(condition, value 1, return value 1, value 2, return value 2, ... value n, return value n, default value)`

**Description** 

The functionality of ORA_DECODE() is the same as that of the DECODE() function in Oracle database. 

Mechanism of this function:

```javascript
IF condition = value 1
THEN RETURN (return value 1)
ELSIF condition = value 2
THEN RETURN (return value 2)
......
ELSIF condition = value n
THEN RETURN (return value n)
ELSE RETURN (default value)
END IF
```


