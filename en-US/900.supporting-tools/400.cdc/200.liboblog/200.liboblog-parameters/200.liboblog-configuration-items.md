liboblog configuration items 
=================================================


**Note**



For configuration items of the bool type, the value 0 indicates False and the value 1 indicates True.

Cluster configuration 
------------------------------------------

### Metadata configuration 



|          Configuration item          |                                    Description                                    |                 Default value                 | Real-time modification supported |                                                                                         Remarks                                                                                          |
|--------------------------------------|-----------------------------------------------------------------------------------|-----------------------------------------------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| init_log_level                       | The initial log level at startup.                                                 | ALL.\*:INFO;SHARE.SCHEMA:INFO                 | No                               | The initial log level is used to generate more detailed logs. The log level is changed to the specified log_level after startup.                                                         |
| log_level                            | The log level after startup.                                                      | ALL.\*:INFO;SHARE.SCHEMA:WARN                 | Yes                              |                                                                                                                                                                                          |
| rootserver_list                      | The rootservice server specified at startup.                                      | `|` (a half-width vertical bar)               | Yes                              | Format: server_ip:server_rpc_port:server_sql_port                                                                                                                                        |
| cluster_url                          | The cluster URL specified at startup.                                             | `|`                                           | No                               | When OceanBase is configured with the cluster URL, liboblog uses this configuration item to obtain the rootserver information. Server high-availability (HA) is supported.               |
| cluster_user                         | The username in the sys tenant.                                                   | Empty (required, to be specified by the user) | No                               | The user must be in the sys tenant and configured with read privilege on internal tables.                                                                                                |
| cluster_password                     | The password of the preceding user.                                               | Empty (required, to be specified by the user) | No                               |                                                                                                                                                                                          |
| config_fpath                         | The dump path of the configuration file.                                          | etc/liboblog.conf                             | No                               | All liboblog configuration information will be dumped into this file.                                                                                                                    |
| timezone                             | The time zone of liboblog.                                                        | +8:00                                         | No                               | This parameter specifies the time zone in which data is formatted and exported, which must be consistent with that of the data source. The default value is UTC+8.                       |
| skip_ob_version_compat_check         | Specifies whether to skip the OceanBase version compatibility check.              | No                                            | No                               | liboblog of the 3.x version supports data synchronization with only OceanBase Database 2.x and 3.x. In addition, the liboblog version must be later than the OceanBase Database version. |
| cluster_version_refresh_interval_sec | The interval for querying the earliest OBServer version of the OceanBase cluster. | 600                                           | No                               | The interval for refreshing the OceanBase cluster version, in seconds.                                                                                                                   |



### Working mode-related configuration 



| Configuration item |                       Description                       |                      Default value                      | Real-time modification supported |                                                                                                                                                            Remarks                                                                                                                                                             |
|--------------------|---------------------------------------------------------|---------------------------------------------------------|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| working_mode       | The working mode.                                       | memory (community edition)/storage (commercial edition) | No                               | In the commercial edition, the persistence mode is used by default. In the community edition, the memory mode is used by default. To use the persistence mode, you must implement the interface in ob_log_store_service.h.                                                                                     |
| store_service_path | The path for storing data in liboblog persistence mode. | ./storage                                               | No                               | This parameter is valid only in persistence mode.  Relative path: The persistent data is stored in the relative path under the path of the process that calls liboblog.  Absolute path: The persistent data is stored in the specified absolute path, for example, store_service_path=/data/1. |



### Synchronization granularity 

liboblog supports data synchronization in multiple dimensions. A single liboblog instance can synchronize data of one cluster, one or multiple tenants, several databases, and several tables. 


| Synchronization granularity |                                   One liboblog                                   |                              Multiple liboblogs                              |
|-----------------------------|----------------------------------------------------------------------------------|------------------------------------------------------------------------------|
| Cluster                     | Supported (Multi-cluster synchronization is not supported by a single liboblog.) | Supported                                                                    |
| Tenant                      | Supported                                                                        | Supported                                                                    |
| Database                    | Supported                                                                        | Supported                                                                    |
| Table                       | Supported                                                                        | Supported (see the following multi-instance configuration items for details) |



If traffic in the tenant is huge, a single liboblog may fail to synchronize data for the entire cluster in real time. In this case, you can use multiple liboblogs to share the load.

1. Each of the liboblog instances synchronizes data of a different tenant.

   

2. Each liboblog instance synchronizes data of a table. If the data synchronization task of a single tenant is still too heavy for a single liboblog, you can configure multiple liboblog instances and use one instance for each table on the tenant. 

   **Notice**

   

   Blacklist and whitelist configuration is required in the preceding two scenarios.
   

3. If the data synchronization task of a single table is still too heavy for a single liboblog, you can configure multiple liboblog instances for the table, and use one instance for each hash partition of the table. 

   **Notice**

   

   In this case, you need to configure multiple liboblog instances.
   




#### Whitelist- and blacklist-related configuration 



|  Configuration item   |                    Description                    | Default value | Real-time modification supported |                                             Remarks                                              |
|-----------------------|---------------------------------------------------|---------------|----------------------------------|--------------------------------------------------------------------------------------------------|
| tb_white_list         | The whitelist of the tables to be synchronized.   | \*.\*.\*      | No                               | Format: tenant name.database name.table name (for example, mytenant1.db1.tb1\|mytenant2.db2.\*). |
| tb_black_list         | The blacklist of the tables to be synchronized.   | `|`           | No                               | The format is the same as above.                                                                 |
| tablegroup_white_list | The whitelist of table groups to be synchronized. | \*.\*         | No                               | Format: tenant name.table group name, for example, (mytenant1.\*\|or_tenant\*.tg\*).             |
| tablegroup_black_list | The blacklist of table groups to be synchronized. | `|`           | No                               | The format is the same as above.                                                                 |


**Note**



liboblog provides data filtering capabilities based on table and table group whitelists and blacklists.

* Only the tables and table groups in the whitelist but not in the blacklist will be synchronized. By default, all tables and table groups in all tenants are in the whitelist, and the blacklist is empty. We recommend that you configure a whitelist for the production environment to synchronize data of specified tenants. Do not use the default values, which may pull redundant data.

  

* The configuration uses the fnmatch function for regular expression matching. The default matching rule is case-insensitive. If enable_oracle_mode_match_case_sensitive is set to 1, name matching for ORACLE tenants is case-sensitive.

  




#### Multi-instance-related configuration 



|                 Configuration item                  |                                                       Description                                                       | Default value | Real-time modification supported |                                                                   Remarks                                                                   |
|-----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| instance_num                                        | The total number of liboblog instances that share the load.                                                             | 1             | No                               |                                                                                                                                             |
| instance_index                                      | The index of the current liboblog to the total number of liboblog instances (which can be taken as the hash bucket ID). | 0             | No                               | Value range: \[0,instance_num) Each liboblog processes only data whose hash value of modinstance_num equals instance_index. |
| enable_global_unique_index_belong_to_multi_instance | Specifies whether to allow a globally unique index table for data synchronization in multi-instance scenarios.          | No            | Yes                              |                                                                                                                                             |



Monitoring-related configuration 
-----------------------------------------------------

### Throttling 

To prevent OOM issues caused by data heaping on the memory in the case of exceptions, liboblog provides throttling capabilities. Throttling is triggered based on the internal status of the liboblog. Data pulling stops during throttling, and resumes when the liboblog status recovers. The following table describes the parameters that control the throttling feature. You can set them to adjust the throttling level as needed. 


|             Configuration item              |                               Description                                | Default value | Real-time modification supported |                                                                              Remarks                                                                               |
|---------------------------------------------|--------------------------------------------------------------------------|---------------|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| memory_limit                                | The memory threshold for triggering liboblog throttling.                 | `20G`         | Yes                              | One of the throttling metrics (the same as below). However, it does not restrict liboblog from using the memory higher than memory_limit. The minimum value is 2G. |
| system_memory_avail_percentage_lower_bound, | The lower limit of available system memory, in percentage.               | 10            | Yes                              | Value range: \[10,80\].                                                                                                                                            |
| part_trans_task_active_count_upper_bound    | The maximum number of active partition transactions.                     | 200000        | Yes                              | The number of active partition transaction structures in memory (allocated and not recycled).                                                                      |
| storager_task_count_upper_bound             | The throttling threshold of the number of tasks for storager to persist. | 1000          | Yes                              | Minimum value: 1.                                                                                                                                                  |
| part_trans_task_reusable_count_upper_bound  | The maximum number of partition transactions to reuse.                   | 10240         | Yes                              | The sum of tasks to be generated to the user queue, tasks to be generated by users, tasks to be returned by users, and tasks pending for GC.                       |
| ready_to_seq_task_upper_bound               | The maximum number of tasks to be sequenced.                             | 2000          | Yes                              | The maximum number of tasks to be sequenced, including tasks pending for parsing, tasks pending for formatting, and tasks pending for persistence.                 |
| pause_fetcher                               | Specifies whether to forcibly stop pulling logs.                         | No (0)        | Yes                              | If this feature is enabled, liboblog forcibly stops pulling logs regardless of the logical computing result of the throttling conditions.                          |



Reference throttling conditions:

1. Condition 1: The number of active partitions exceeds the threshold part_trans_task_active_count_upper_bound \|\| The memory held by liboblog exceeds the threshold memory_limit \|\| The available memory of the system is lower than the threshold system_memory_avail_percentage_lower_bound.

   

2. Condition 2: The number of partition transaction structures to be reused exceeds the threshold part_trans_task_reusable_count_upper_bound \|\| The number of tasks to be sequenced exceeds the threshold ready_to_seq_task_upper_bound.

   




<!-- -->

3. Condition 3 (since 3.x): The number of tasks to be persisted exceeds the threshold storager_task_count_upper_bound \&\& The memory held by liboblog exceeds the throttling triggering memory threshold (memory_limit) multiplied by the percentage of memory used by the persistence module in the throttling memory (storager_mem_percentage).

   




Throttling triggering condition: ((Condition 1 \&\& Condition 2) \|\| Condition 3) \|\| (pause_fetcher != 0)

### Monitoring information output 



|           Configuration item            |                                                                  Description                                                                   | Default value | Real-time modification supported |                                    Remarks                                    |
|-----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|-------------------------------------------------------------------------------|
| enable_dump_pending_trans_info          | Specifies whether to regularly collect and print statistics on the status of distributed transactions in liboblog.                             | No            | Yes                              | If the value is set to `1`, the statistics are printed once every 10 seconds. |
| print_fetcher_slowest_part_num          | Specifies whether to print the number of partitions with the lowest log pulling speed.                                                         | 10            | Yes                              |                                                                               |
| print_rpc_handle_info                   | Specifies whether to print RPC-related information.                                                                                            | No            | Yes                              |                                                                               |
| print_stream_dispatch_info              | Specifies whether to print the log stream information.                                                                                         | No            | Yes                              |                                                                               |
| print_partition_heartbeat_info          | Specifies whether to print partition heartbeat information.                                                                                    | No            | Yes                              |                                                                               |
| print_partition_serve_info              | Specifies whether to print the partition service information, such as the partition status and the number of transactions of the partition.    | No            | Yes                              |                                                                               |
| print_participant_not_serve_info        | Specifies whether to print the information of all transactions that are not in service (no data is generated) for the distributed transaction. | No            | Yes                              |                                                                               |
| print_partition_server_list_update_info | Specifies whether to print the details of the servers when the list of partition servers is updated.                                           | No            | Yes                              |                                                                               |
| output_inner_heartbeat_interval_msec    | Specifies the interval to obtain the global partition heartbeats. Unit: milliseconds.                                                          | 100           | Yes                              | We recommend that you do not modify this parameter.                           |
| enable_formatter_print_log              | Specifies whether to enable formatter to generate logs whose formatting data is omitted.                                                       | No            | Yes                              |                                                                               |



Metadata management 
----------------------------------------

### Tenant management 



|           Configuration item            |                                                                 Description                                                                 | Default value | Real-time modification supported |                                                                                                                                                                                                                                                             Remarks                                                                                                                                                                                                                                                              |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| skip_rename_tenant_ddl                  | Specifies whether to ignore DDL statements that rename a tenant.                                                                            | No            | Yes                              | The renamed tenant is not affected if it is not included in the liboblog synchronization whitelist. Otherwise, an error message is displayed and the process is terminated. This is because the rename operation overruns the whitelist restriction. In this case, we recommend that you modify the whitelist to support the tenants before and after the rename operation.  When the value is set to true, the system will skip the DDL statements of the renamed tenant and continue the data synchronization. |
| enable_oracle_mode_match_case_sensitive | Specifies whether to enable the case-sensitive matching of tenants against the blacklist or whitelist in Oracle mode of OceanBase Database. | No            | No                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |



Fetcher module-related configuration 
---------------------------------------------------------



|        Configuration item        |                                                      Description                                                      | Default value | Real-time modification supported |                 Remarks                  |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|------------------------------------------|
| partition_count_upper_limit      | Specifies the number of partition progress values.                                                                    | 2000000       | No                               | Supports at most 200 million partitions. |
| check_switch_server_interval_min | Specifies the interval of periodic partition check for the necessity of switching log pulling servers. Unit: minutes. | 30            | Yes                              |                                          |



### SQL query-related configuration 



|        Configuration item         |                                                 Description                                                 | Default value | Real-time modification supported |          Remarks          |
|-----------------------------------|-------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|---------------------------|
| access_systable_helper_thread_num | Specifies the maximum allowed number of connections in the connection pool for SQL execution.               | 64            | No                               | Value range: \[48,1024\]. |
| mysql_connect_timeout_sec         | Specifies the time-out period of the SQL connection between OceanBase Database and liboblog. Unit: seconds. | 40            | Yes                              |                           |
| mysql_query_timeout_sec           | Specifies the time-out period of an SQL query. Unit: seconds.                                               | 30            | Yes                              |                           |
| sql_server_change_interval_sec    | Specifies the time interval for changing the SQL execution server. Unit: seconds.                           | 60            | Yes                              |                           |



### Filter data based on cluster_id 

liboblog enables you to filter data based on the cluster_id blacklist. Although OceanBase Database specifies a valid cluster_id range, you can specify the values to filter the following unwanted data in a synchronization task:

* The data that is not included in the valid cluster_id range specified by OceanBase Database and OceanBase Migration Service (OMS). The value range is \[1,4294901759\] U \[4294901760,4294967295\].

  

* The data that is specified in the cluster_id_black_list field.

  

* The data that is between the values of the cluster_id_black_value_min and cluster_id_black_value_max parameters.

  




|     Configuration item     |                             Description                              | Default value | Real-time modification supported |                                                                          Remarks                                                                          |
|----------------------------|----------------------------------------------------------------------|---------------|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| cluster_id_black_list      | The blacklist of cluster IDs.                                        | 2147473648    | No                               | Separate multiple cluster IDs with vertical bars (`|`).  The data of clusters whose cluster IDs are in the blacklist is not synchronized. |
| cluster_id_black_value_min | The lower limit of the cluster_ids in the synchronization blacklist. | 2147473648    | No                               |                                                                                                                                                           |
| cluster_id_black_value_max | The upper limit of the cluster_ids in the synchronization blacklist. | 2147483647    | No                               |                                                                                                                                                           |



### Server-level blacklist parameters 

liboblog can send SQL and RPC requests to the OBServer. OceanBase Database provides configuration items that allow you to block all requests sent to specific servers. 

In addition, as liboblog pulls logs at the partition level, a built-in blacklist is provided to add servers that have timed out or errors when pulling partition logs to the blacklist. Servers are automatically added to or removed from the blacklist. 


|  Configuration item  |                                    Description                                     | Default value | Real-time modification supported |                                                                                                                                        Remarks                                                                                                                                         |
|----------------------|------------------------------------------------------------------------------------|---------------|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| server_blacklist     | A blacklist of servers that are blocked from receiving RPC requests from liboblog. | `|`           | Yes                              | Separate multiple servers with vertical bars (`|`"). Logs are not pulled from servers in the blacklist. You can manually add a server to the blacklist when the server cannot provide log services, for example, in the case of network partitioning and high latency. |
| sql_server_blacklist | A blacklist of servers that are blocked from receiving SQL requests from liboblog. | `|`           | Yes                              | Separate multiple servers with vertical bars (`|`). liboblog does not send any SQL queries to servers in the list.                                                                                                                                                     |



### Partition-level blacklist parameters (generally not modified) 



|             Configuration item             |                                                                                            Description                                                                                            | Default value | Real-time modification supported |      Remarks       |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|--------------------|
| blacklist_survival_time_sec                | Specifies the waiting time of the server in the blacklist. Unit: seconds.                                                                                                                         | 30            | No                               |                    |
| blacklist_survival_time_upper_limit_min    | Specifies the maximum period of the server in the blacklist. Unit: minutes.                                                                                                                       | 4             | Yes                              |                    |
| blacklist_survival_time_penalty_period_min | Specifies the penalty time interval threshold. If a server is added to the blacklist again within this time interval, the time for the server to stay in the blacklist is doubled. Unit: minutes. | 1             | Yes                              |                    |
| blacklist_history_overdue_time_min         | Specifies the period after which a server is deleted from the blacklist history. Unit: minutes.                                                                                                   | 30            | Yes                              | Minimum value: 10. |
| blacklist_history_clear_interval_min       | Specifies the time interval for clearing the information of servers in the blacklist. Unit: minutes.                                                                                              | 20            | Yes                              | Minimum value: 10. |



### Server cache-related configuration 



|          Configuration item          |                                       Description                                        | Default value | Real-time modification supported | Remarks |
|--------------------------------------|------------------------------------------------------------------------------------------|---------------|----------------------------------|---------|
| all_server_cache_update_interval_sec | Specifies the time interval for updating the cached list of servers. Unit: seconds.      | 5             | Yes                              |         |
| all_zone_cache_update_interval_sec   | Specifies the time interval for updating the cached information of zones. Unit: seconds. | 5             | Yes                              |         |



### Log pulling-related configuration 



|                Configuration item                 |                                                                                     Description                                                                                      | Default value | Real-time modification supported |                                                                                                                                                                                               Remarks                                                                                                                                                                                               |
|---------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| svr_finder_thread_num                             | Specifies the number of threads that search for servers where the partition logs are stored.                                                                                         | 4             | No                               | Value range: \[1,32\].                                                                                                                                                                                                                                                                                                                                                                              |
| fetcher_heartbeat_thread_num                      | Specifies the number of threads that send heartbeat RPC requests to the leader.                                                                                                      | 4             | No                               | Value range: \[1,32\].                                                                                                                                                                                                                                                                                                                                                                              |
| idle_pool_thread_num                              | Specifies the number of threads that process the pending partition-level log pulling tasks.                                                                                          | 4             | No                               | Value range: \[1,32\].                                                                                                                                                                                                                                                                                                                                                                              |
| dead_pool_thread_num                              | Specifies the number of threads that recycle the partition-level log pulling tasks.                                                                                                  | 1             | No                               | Value range: \[1,32\].                                                                                                                                                                                                                                                                                                                                                                              |
| stream_worker_thread_num                          | Specifies the number of threads that dispatch the partition-level log pulling tasks.                                                                                                 | 8             | No                               | Value range: \[0,64\].                                                                                                                                                                                                                                                                                                                                                                              |
| start_log_id_locator_thread_num                   | Specifies the number of threads that locate the ID of the starting partition log.                                                                                                    | 4             | No                               | Value range: \[1,32\].                                                                                                                                                                                                                                                                                                                                                                              |
| start_log_id_locator_locate_count                 | Specifies the number of requests that complete the task of locating the starting partition log.                                                                                      | 3             | No                               | Minimum value: 1.  To locate the ID of the starting partition log, the follower partitions of the specified number must return the same starting log ID.                                                                                                                                                                                                                            |
| skip_start_log_id_locator_result_consistent_check | Specifies whether to skip checking the consistency of the starting log ID.                                                                                                           | No            | No                               |                                                                                                                                                                                                                                                                                                                                                                                                     |
| svr_stream_cached_count                           | Specifies the initial size of the object pool of the server log stream.                                                                                                              | 16            | No                               | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| fetch_stream_cached_count                         | Specifies the initial number of logs in the object pool of the partition log stream.                                                                                                 | 16            | No                               | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| start_log_id_locator_rpc_timeout_sec              | Specifies the timeout of RPC requests for locating the starting partition log ID. Unit: seconds.                                                                                     | 60            | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| start_log_id_locator_batch_count                  | Specifies the batch number of the RPC requests for locating the starting partition log ID.                                                                                           | 2000          | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| svr_finder_sql_batch_count                        | Specifies the batch size of SQL queries to be sent to each server.                                                                                                                   | 1             | Yes                              | Value range: \[1,200\].                                                                                                                                                                                                                                                                                                                                                                             |
| stream_life_time_sec                              | Specifies the period for which the log stream is maintained at the server. Unit: seconds. The end time of the log stream is maintained at the server during the log pulling process. | 60            | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| stream_max_partition_count                        | Specifies the maximum number of partitions allowed for a log stream.                                                                                                                 | 5,000         | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| stream_feedback_interval_sec                      | Specifies the time interval for the server to provide feedback. Unit: seconds.                                                                                                       | 3             | Yes                              | Minimum value: 0. The server is requested to periodically report the partition status information, such as whether the partition replica on the server is lagged behind, whether the server stores the specified log, and whether the partition is offline.                                                                                                                                         |
| heartbeat_interval_sec                            | Specifies the time interval to send RPC requests for partition heartbeat. Unit: seconds.                                                                                             | 1             | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| heartbeater_rpc_timeout_sec                       | Specifies the timeout of RPC requests for partition heartbeat. Unit: seconds.                                                                                                        | 60            | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| heartbeater_batch_count                           | Specifies the batch number of RPC requests for partition heartbeat.                                                                                                                  | 2000          | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| svr_list_update_interval_sec                      | Specifies the time interval for updating the list of servers where the partition logs are stored. Unit: seconds.                                                                     | 600           | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| leader_info_update_interval_sec                   | Specifies the time interval for updating the information of leader partition. Unit: seconds.                                                                                         | 600           | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| fetch_log_rpc_timeout_sec                         | Specifies the timeout of RPC requests for pulling partition logs. Unit: seconds.                                                                                                     | 15            | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| fetch_log_cnt_per_part_per_round                  | Specifies the maximum number of logs returned from each partition per RPC request.                                                                                                   | 8,000         | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| progress_limit_sec_for_dml                        | Specifies the maximum allowed number of DML logs.                                                                                                                                    | 3             | Yes                              | Minimum value: 1.  Log-pulling in some partitions can be much faster than others. To ensure that the log pulling progress is roughly at the same pace across partitions, the maximum number of DML logs that can be provided by the server is limited to the sum of the minimum number of pulled logs among all partitions + the value of the progress_limit_sec_for_dml parameter. |
| partition_timeout_sec                             | Specifies the timeout threshold of RPC requests for pulling partition logs. Unit: seconds.                                                                                           | 3             | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |
| partition_timeout_sec_for_lagged_replica          | Specifies the timeout threshold of pulling logs from lagged replica. Unit: seconds.                                                                                                  | 15            | Yes                              | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                                                                   |



#### Log pulling priority-related configuration 



| Configuration item |                              Description                              | Default value  | Real-time modification supported |                               Remarks                               |
|--------------------|-----------------------------------------------------------------------|----------------|----------------------------------|---------------------------------------------------------------------|
| region             | Specifies the region of the server on which the liboblog is deployed. | default_region | No                               | The logs are first pulled from OBServers in the region of liboblog. |



#### Parameters of RPC module (modifications not recommended) 



|            Configuration item             |                                             Description                                             | Default value | Real-time modification supported |                                                                  Remarks                                                                  |
|-------------------------------------------|-----------------------------------------------------------------------------------------------------|---------------|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| io_thread_num                             | Specifies the number of I/O threads for RPC requests.                                               | 4             | No                               | Minimum value: 1.                                                                                                                         |
| rpc_tenant_id                             | Specifies the ID of the tenant to which the RPC thread belongs.                                     | 1             | No                               | Minimum value: 1.                                                                                                                         |
| rpc_result_cached_count                   | Specifies the initial number of pulled logs in the object pool of RPC requests for pulling logs.    | 16            | No                               | Minimum value: 1.                                                                                                                         |
| rpc_process_handler_time_upper_limit_msec | Specifies the maximum time for processing an RPC request. Unit: seconds.                            | 200           | Yes                              | Minimum value: 1.                                                                                                                         |
| rpc_result_count_per_rpc_upper_limit      | Specifies the maximum number of unprocessed results of the log-pulling RPC request in a log stream. | 16            | Yes                              | Minimum value: 1. When the number of results in a log-pulling stream reaches the maximum value, the log-pulling RPC request is suspended. |



#### Communication security-related configuration 



|    Configuration item     |                    Description                     | Default value | Real-time modification supported |                                                                                                                     Remarks                                                                                                                      |
|---------------------------|----------------------------------------------------|---------------|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ssl_client_authentication | Specifies whether secure communication is enabled. | No            | No                               | By default, secure communication is disabled.                                                                                                                                                                                                    |
| ssl_external_kms_info     | Specifies the method of secure communication.      | file          | No                               | For external communication, only the file mode is supported. You need to create a /wallet directory under the boot directory of liboblog, and put the following key files in the /wallet directory: ca.pem, client-cert.pem, and client-key.pem. |



Parser module-related configuration 
--------------------------------------------------------



|      Configuration item      |                                  Description                                   | Default value | Real-time modification supported |                                                                                                       Remarks                                                                                                        |
|------------------------------|--------------------------------------------------------------------------------|---------------|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| dml_parser_thread_num        | Specifies the number of threads in the thread pool for parsing DML statements. | 5             | No                               | Minimum value: 1.                                                                                                                                                                                                    |
| ddl_parser_thread_num        | Specifies the number of threads in the thread pool for parsing DDL statements. | 1             | No                               | Minimum value: 1.                                                                                                                                                                                                    |
| skip_reversed_schema_verison | Specifies whether to ignore schema version rollback.                           | No            | No                               | Generally, the schema version monotonically increases during the processing of DDL statements. The rollback of the schema version indicates an exception. However, you can use this parameter to skip the exception. |



Sequencer module-related configuration 
-----------------------------------------------------------



|   Configuration item   |                                         Description                                         | Default value | Real-time modification supported |      Remarks      |
|------------------------|---------------------------------------------------------------------------------------------|---------------|----------------------------------|-------------------|
| sequencer_thread_num   | Specifies the number of threads in the thread pool for sequencing distributed transactions. | 5             | No                               | Minimum value: 1. |
| sequencer_queue_length | Specifies the number of partition transactions waiting to be sequenced.                     | 102400        | No                               | Minimum value: 1. |



Formatter module-related configuration 
-----------------------------------------------------------



|  Configuration item  |                               Description                               | Default value | Real-time modification supported |                                                                                                                                                                           Remarks                                                                                                                                                                           |
|----------------------|-------------------------------------------------------------------------|---------------|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| formatter_thread_num | Specifies the number of threads in the thread pool for data formatting. | 10            | No                               | Minimum value: 1.                                                                                                                                                                                                                                                                                                                                           |
| skip_dirty_data      | Specifies whether to skip data exceptions.                              | No            | Yes                              | Possible exceptions: 1. Non-full column logging. This means the Clog only recorded the columns that have been changed. Related configuration item: binlog_row_image.   2. Exceptions in DDL statements of the tenant restored from a physical backup.    |



Storager module-related configuration 
----------------------------------------------------------



|  Configuration item   |                                        Description                                        | Default value | Real-time modification supported | Remarks |
|-----------------------|-------------------------------------------------------------------------------------------|---------------|----------------------------------|---------|
| storager_thread_num   | Specifies the number of threads in the thread pool of the Storager module.                | 10            | No                               |         |
| storager_queue_length | Specifies the number of persistence tasks waiting to be processed by the Storager module. | 102400        | No                               |         |



### Data Processor module-related configuration 



|     Configuration item      |                                          Description                                          | Default value | Real-time modification supported | Remarks |
|-----------------------------|-----------------------------------------------------------------------------------------------|---------------|----------------------------------|---------|
| data_processor_thread_num   | Specifies the number of threads in the thread pool for reading data from the Storager module. | 10            | No                               |         |
| data_processor_queue_length | Specifies the number of data deserialization tasks waiting to be processed.                   | 102400        | No                               |         |



Binlog record output-related configuration 
---------------------------------------------------------------



|             Configuration item             |                                                  Description                                                  | Default value | Real-time modification supported |                                                                                                             Remarks                                                                                                             |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------|---------------|----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| enable_output_trans_order_by_sql_operation | Specifies whether to generate data rows in the transaction in the order that the SQL statements are executed. | No            | No                               | The execution order refers to the order in which OceanBase Database makes changes to the data. It may not be the same with the order in which the SQL statements are sent from the client.                                      |
| sort_trans_participants                    | Specifies whether to sort SQL statements by the distributed transaction participants.                         | No            | No                               | The parameter indicates whether to sort statements by the partition key. You can maintain a stable statement output sequence by setting using parameter together with the enable_output_trans_order_by_sql_operation parameter. |
| enable_output_hidden_primary_key           | Specifies whether to generate the hidden primary keys of tables without primary keys.                         | No            | No                               | You can generate the hidden primary keys of tables without primary keys by setting the parameter value to 1.                                                                                                                    |
| enable_convert_timestamp_to_unix_timestamp | Specifies whether to convert a timestamp to an integer in the Unix format.                                    | No            | No                               |                                                                                                                                                                                                                                 |
| enable_output_invisible_column             | Specifies whether to generate the hidden columns.                                                             | No            | No                               |                                                                                                                                                                                                                                 |
| output_heartbeat_interval_sec              | Specifies the time interval for generating the information of security checkpoints. Unit: seconds.            | 3             | Yes                              |                                                                                                                                                                                                                                 |



Resource recycling-related configuration (modifications not recommended) 
---------------------------------------------------------------------------------------------



|          Configuration item          |                                   Description                                    | Default value | Real-time modification supported |                                               Remarks                                                |
|--------------------------------------|----------------------------------------------------------------------------------|---------------|----------------------------------|------------------------------------------------------------------------------------------------------|
| resource_collector_thread_num        | Specifies the number of threads in the thread pool for recycling resources.      | 10            | No                               | Minimum value: 1.                                                                                    |
| resource_collector_thread_num_for_br | Specifies the number of threads in the thread pool for recycling binlog records. | 7             | No                               | The value of this parameter must be larger than that of the resource_collector_thread_num parameter. |


**Notice**



We recommend that you do not modify the configuration items that are not listed in this section.
