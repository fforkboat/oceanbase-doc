# 通过 ODC 连接 OceanBase 数据库

您可以通过 OceanBase 提供的开发者工具 ODC 来连接 OceanBase 数据库。

## 前提条件

* 请确保已经获取并安装 ODC。

  您可以联系 OceanBase 技术支持人员来获取 ODC 的安装包。有关 ODC 安装的相关信息，参见《ODC 部署指南》。
  
* 请确认已从部署人员处获取 OceanBase 数据库对应的连接串。

  在 ODC 中连接数据库时会用到该连接串中的信息。
  
## 注意事项

在通过 ODC 连接 OceanBase 数据库时，所有用户只能连接本租户下的数据库，不能连接其他租户下的数据库。

## 操作步骤

>**说明**
>
>不同 ODC 版本的操作界面可能不同，本文档以 ODC V3.2.0 版本为例提供数据库的连接指导，ODC 其他版本的操作请参考 ODC 对应版本的产品文档。

1. 登录 ODC。

   进入 ODC 首页后，ODC 首页中会直接显示 **个人连接** 页签。

2. 在 **个人连接** 页签右上角，单击 **新建连接** 按钮。

    ![新建数据库连接](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V3.1.3/zh-CN/developer-guide/connect-to-oceanbase-database/4.%E6%96%B0%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5.png)

    >**说明**
    >
    >ODC 第一次运行时，加载时间会比较长，请耐心等待。

3. 在弹出的页面中，填写或选择待连接的数据库信息。

   ![编辑连接](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V3.1.3/zh-CN/developer-guide/connect-to-oceanbase-database/4.%E7%BC%96%E8%BE%91%E8%BF%9E%E6%8E%A5.png)

   您可以通过两种方式填写数据库连接的基础配置信息：

   * 根据 OceanBase 数据库连接串 `mysql -h主机名 -P端口号 -u数据库用户名@租户名#集群名 -D默认数据库 -p数据库密码`，在配置页面填写下表中的信息。

   * 在页面的 **智能解析** 项中直接粘贴数据库连接串，ODC 会自动识别连接串并在窗口中填充各项连接信息。

    |     信息项     |       说明       |
    |-------------|-------------------------------------------|
    | 所属区域        | 选择连接实例所在的区域 **公有云** （阿里云上的数据库实例） 或 **独立部署/专有云** （在自己环境中搭建的数据库实例）。              |
    | 连接模式        | 选择 **MySQL**  。    |
    | 连接名称        | 指定该连接的名称。      |
    | 设置标签        | 用于为连接添加提示说明类的信息。 单击 **连接名称** 文本框后的 **设置标签** 按钮为当前连接指定标签，在弹出的下拉列表中可进行设置标签和管理标签的操作： <ul><li>设置标签：在下拉列表中选择目标标签完成设置。若列表为空请先新建标签。<li> 管理标签：单击列表最下方的 **新建标签** 按钮或者单击列表上方的设置图标以弹出 **标签管理** 窗口。在标签管理窗口可对创建好的标签进行编辑和删除操作。也可单击上方的 **新建标签** 按钮指定新标签的名称和图标颜色。</li></ul> |
    | 连接地址        | <ul><li>**主机名** ：待连接的数据库所在服务器的 IP 信息。</li><li> **端口号** ：待连接的数据库所在服务器的端口号信息。</li> <li>**集群** ：待连接的数据库所在集群的名称。</li><li> **租户** ：待连接的数据库所在租户的名称。</li></ul>  |
    | 默认数据库       | 连接 MySQL 租户中的数据库时，需填写该连接要使用的默认数据库。   |
    | 数据库用户名      | 在租户中创建的账号（MySQL 模式下该账户必须有访问默认数据库的权限）。          |
    | 数据库密码       | 在租户中创建的账号的密码。 单击数据库密码框后的 **测试连接** 按钮，测试是否能够连接到目标数据库。如果配置信息有误，会有异常提示，例如用户或密码不对、网络异常等。           |
    | 保存数据库密码     | 关闭该项时，连接信息中将不保存数据库密码信息。每次进入连接或测试连接时，需要在弹出的密码弹窗中输入数据库密码以进入连接。 开启该项时，连接信息将保存数据库密码信息，每次进入连接无需输入数据库密码。             |
    | 智能解析        | 在文本框中粘贴连接串信息，ODC 会自动识别连接串并在窗口中填充各项连接信息。        |
    | SQL 查询超时时间  | 单击页面下方 **高级配置** 标签弹出该项。支持自定义 SQL 超时时间，默认为 60 s，超过指定的时间时查询自动终止。 |
    | 查询 sys 租户视图 | 单击页面下方 **高级配置** 标签弹出该项，当 **连接地址** 中已指定 **租户** 为 `sys` 时，该项被自动填充。<ul><li> **账户** ：拥有 `sys` 租户视图查看权限的账号。</li><li> **密码** ：账号对应的密码。输入账户和密码信息后，单击密码框后的 **测试连接** 按钮测试账户信息是否正确。</li></ul> <blockquote>**说明** </br> ODC V2.3.0 及之后的版本，如果需要使用数据导入导出和查看分区信息功能，需要在此项配置 `root@sys` 账号。</blockquote> |

4. 单击页面下方的 **保存** 按钮，将当前的配置信息持久保存在 ODC 连接列表中。

5. 在连接配置列表中，单击刚刚保存的连接名或者在该连接对应的 **操作** 列中，单击 **打开** ，即可登录到 OceanBase 数据库。

   ![数据库连接成功](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V3.1.3/zh-CN/developer-guide/connect-to-oceanbase-database/4.%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F.png)

   在上述页面支持的主要功能包括：

   * 对象管理：提供对数据库对象做可视化创建引导的服务，这降低了用户的使用门槛。同时，对象管理还提供查看表数据时，对表数据进行在线编辑的服务。
   * 控制台：支持对 SQL 窗口内的内容进行保存及再修改，可帮助用户进行脚本的复用。同时支持一键格式化 SQL 脚本和结构化展示 SQL 内容。在编写 SQL 的过程中 SQL 编辑器能为用户提供智能提示以简化编写难度。SQL 运行得到的结果集支持编辑和导出。
   * 工具集：包含会话管理、回收站管理和导入导出工具。会话管理支持对数据库会话属性及全局属性做修改，同时也支持用户终止指定的数据库会话。回收站管理支持用户清除及还原数据库对象。导入导出支持用户进行多表或单表多种数据格式的导入导出。
   * SQL 诊断：能够方便用户进行 SQL 执行计划和 SQL 执行过程中资源消耗的查看。能够帮助用户定位 SQL 脚本中存在的问题。

## 相关阅读

通过 ODC 连接并使用 OceanBase 数据库的更多信息，请参见 ODC 对应版本的使用文档。
