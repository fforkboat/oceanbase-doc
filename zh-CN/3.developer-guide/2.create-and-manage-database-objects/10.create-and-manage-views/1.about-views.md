# 关于视图

视图是指计算机数据库中的视图，是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。本章节主要介绍视图相关的基本概念和使用方法。

## 视图的优势

* 视点集中：视图集中即是使用户只关心它感兴趣的某些特定数据和他们所负责的特定任务。这样通过只允许用户看到视图中所定义的数据而不是视图引用表中的数据而提高了数据的安全性。
  
* 简化操作：视图大大简化了用户对数据的操作。因为在定义视图时，若视图本身就是一个复杂查询的结果集，这样在每一次执行相同的查询时，不必重新写这些复杂的查询语句，只要一条简单的查询视图语句即可。可见视图向用户隐藏了表与表之间的复杂的连接操作。

* 定制数据：视图能够实现让不同的用户以不同的方式看到不同或相同的数据集。因此，当有许多不同水平的用户共用同一数据库时，这显得极为重要。

* 合并分割数据：在有些情况下，由于表中数据量太大，故在表的设计时常将表进行水平分割或垂直分割，但表的结构的变化却对应用程序产生不良的影响。如果使用视图就可以重新保持原有的结构关系，从而使外模式保持不变，原有的应用程序仍可以通过视图来重载数据。

* 安全性：视图可以作为一种安全机制。通过视图用户只能查看和修改他们所能看到的数据。其它数据库或表既不可见也不可以访问。如果某一用户想要访问视图的结果集，必须授予其访问权限。视图所引用表的访问权限与视图权限的设置互不影响。

  * 视图的安全性

    视图的安全性可以防止未授权用户查看特定的行或列，使用户只能看到表中特定行的方法如下：

    * 在表中增加一个标志用户名的列。

    * 建立视图，是用户只能看到标有自己用户名的行。

    * 把视图授权给其他用户。

  * 逻辑数据独立性

    视图可以使应用程序和数据库表在一定程度上独立。如果没有视图，应用一定是建立在表上的。有了视图之后，程序可以建立在视图之上，从而程序与数据库表被视图分割开来。视图可以在以下几个方面使程序与数据独立：

    * 如果应用建立在数据库表上，当数据库表发生变化时，可以在表上建立视图，通过视图屏蔽表的变化，从而应用程序可以不动。

    * 如果应用建立在数据库表上，当应用发生变化时，可以在表上建立视图，通过视图屏蔽应用的变化，从而使数据库表不动。

    * 如果应用建立在视图上，当数据库表发生变化时，可以在表上修改视图，通过视图屏蔽表的变化，从而应用程序可以不动。

    * 如果应用建立在视图上，当应用发生变化时，可以在表上修改视图，通过视图屏蔽应用的变化，从而数据库可以不动。

​视图使您能够为不同类型的用户定制数据的呈现方式。视图拥有如下优势：

* 把经常使用的数据定义为视图以简化操作。数据库的查询大多要使用聚合函数，同时还要显示其它字段的信息，可能还会需要关联到其它表，这时涉及的 SQL 语句可能比较复杂。如果需要频繁执行此查询，就可以通过创建视图简化查询操作，之后只需要执行 `SELECT * FROM view_name` 就可以获得预期结果。

* 视图限制用户只能查询和修改可视的数据，提高了数据的安全性。视图是动态的数据集合，数据随着基表的更新而更新。但是视图是虚拟的，物理上是不存在的，只是存储了数据的集合，所以可以将基表中重要的字段信息屏蔽，不通过视图展示给用户。

* 视图拥有逻辑上的独立性，屏蔽了真实表的结构带来的影响。视图可以使应用程序和数据库的表在一定程度上互相独立。如果没有视图，应用一定是建立在表上的。创建了视图之后，程序可以建立在视图之上，从而程序与数据库表被视图分割开来。

## 视图的特点

与表不同，视图没有分配存储空间，视图也不包含数据。相反，视图是从视图引用的基表中提取或派生数据。因此除了用于定义数据字典中视图的查询的存储之外，它不需要其他存储。

​视图依赖于其引用的对象，如果视图所依赖的对象被删除、更新或者重建，则数据库会确定新对象是否可以被视图定义所接受。
