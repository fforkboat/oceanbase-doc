PL 执行机制 
============================

​OceanBase 数据库的 PL 仅支持编译执行。本文主要介绍 PL 与 OBServer 和 SQL 引擎间的执行机制。

编译执行相对于解释执行有更好的性能优势。尤其是在 PL 内部计算元素比较多的场景下，性能提升会更加明显。

​在编译执行的框架下，PL 源代码会被直接编译为对应平台的可执行代码。PL 执行时，OBServer 直接调用编译好的可执行代码。同时编译好的 PL 代码会被缓存在 PL 缓存中，因此同一个 PL 仅需要编译一次。

​![PL](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9763623461/p355617.jpg)

PL 在定义时被存储在 OBServer 中，当应用程序调用存储过程时，OBServer 首先从数据字典中读取 PL 的定义，然后将 PL 定义编译为可执行的二进制代码，将编译好的 PL 二进制代码存储进 PL 缓存。执行时 PL 引擎从 PL 缓存获取可执行代码，配合 SQL 引擎完成 PL 的执行。

​存储过程间可以嵌套调用，例如当前 PL 块可以调用另外的存储过程。
