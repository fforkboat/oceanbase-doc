# 查看资源的分配情况

OceanBase 数据库支持通过视图查看租户的资源分配情况。

## 操作步骤

1. 使用 `root` 用户登录集群的 `sys` 租户。

2. 进入 `oceanbase` 数据库。

   ```sql
   obclient>USE oceanbase;
   ```

3. 执行以下命令，查看集群内各 Server 的资源分配情况。

   ```sql
   obclient> SELECT * FROM oceanbase.GV$OB_SERVERS\G
   *************************** 1. row ***************************
                    SVR_IP: xx.xx.xx.xx
                  SVR_PORT: 2882
                      ZONE: zone1
                  SQL_PORT: 2881
              CPU_CAPACITY: 62
          CPU_CAPACITY_MAX: 62
              CPU_ASSIGNED: 4.5
          CPU_ASSIGNED_MAX: 4.5
              MEM_CAPACITY: 75161927680
              MEM_ASSIGNED: 30064771072
         LOG_DISK_CAPACITY: 179583320064
         LOG_DISK_ASSIGNED: 55834574848
           LOG_DISK_IN_USE: 9395240960
        DATA_DISK_CAPACITY: 107374182400
          DATA_DISK_IN_USE: 4724883456
   DATA_DISK_HEALTH_STATUS: NORMAL
   DATA_DISK_ABNORMAL_TIME: NULL
   *************************** 2. row ***************************
                    SVR_IP: xx.xx.xx.xx
                  SVR_PORT: 2882
                      ZONE: zone2
                  SQL_PORT: 2881
              CPU_CAPACITY: 62
          CPU_CAPACITY_MAX: 62
              CPU_ASSIGNED: 4.5
          CPU_ASSIGNED_MAX: 4.5
              MEM_CAPACITY: 75161927680
              MEM_ASSIGNED: 30064771072
         LOG_DISK_CAPACITY: 179583320064
         LOG_DISK_ASSIGNED: 55834574848
           LOG_DISK_IN_USE: 9395240960
        DATA_DISK_CAPACITY: 107374182400
          DATA_DISK_IN_USE: 4724883456
   DATA_DISK_HEALTH_STATUS: NORMAL
   DATA_DISK_ABNORMAL_TIME: NULL
   *************************** 3. row ***************************
                    SVR_IP: xx.xx.xx.xx
                  SVR_PORT: 2882
                      ZONE: zone3
                  SQL_PORT: 2881
              CPU_CAPACITY: 62
          CPU_CAPACITY_MAX: 62
              CPU_ASSIGNED: 4.5
          CPU_ASSIGNED_MAX: 4.5
              MEM_CAPACITY: 75161927680
             M EM_ASSIGNED: 30064771072
         LOG_DISK_CAPACITY: 179583320064
         LOG_DISK_ASSIGNED: 55834574848
           LOG_DISK_IN_USE: 9395240960
        DATA_DISK_CAPACITY: 107374182400
          DATA_DISK_IN_USE: 4724883456
   DATA_DISK_HEALTH_STATUS: NORMAL
   DATA_DISK_ABNORMAL_TIME: NULL
   3 row in set
   ```

   更多视图 `oceanbase.GV$OB_SERVERS` 的说明信息请参见 [GV$OB_SERVERS](../../../5.system-reference/4.system-view-of-mysql-mode/3.performance-view-of-mysql-mode/9.gv-ob_servers-of-mysql-mode.md)。

4. 执行以下命令，查看集群内所有租户的资源分配情况。

    ```shell
    obclient> SELECT * FROM oceanbase.GV$OB_UNITS\G
    *************************** 1. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1
           TENANT_ID: 1
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 1
             MIN_CPU: 1
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 10000
            MIN_IOPS: 10000
         IOPS_WEIGHT: 1
       LOG_DISK_SIZE: 5368709120
     LOG_DISK_IN_USE: 101820612
    DATA_DISK_IN_USE: 33554432
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:18:16.846816
    *************************** 2. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1001
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 99578660
    DATA_DISK_IN_USE: 29360128
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:23:01.010798
    *************************** 3. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1002
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 20000
            MIN_IOPS: 20000
         IOPS_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 154180012
    DATA_DISK_IN_USE: 18874368
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:23:01.010798
    *************************** 4. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1003
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 98556577
    DATA_DISK_IN_USE: 29360128
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:24:07.490742
    *************************** 5. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1004
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 20000
            MIN_IOPS: 20000
         IOPS_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 158676614
    DATA_DISK_IN_USE: 25165824
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:24:07.490742
    5 rows in set
    ```

   更多视图 `GV$OB_UNITS` 的说明信息请参见 [GV$OB_UNITS](../../../5.system-reference/4.system-view-of-mysql-mode/3.performance-view-of-mysql-mode/13.gv-ob_units-of-mysql-mode.md)。
