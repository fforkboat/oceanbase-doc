# 通过修改 UNIT_NUM

对租户内资源的扩容还可以通过调大或调小资源池中的 `UNIT_NUM` 来实现。

## 前提条件

在进行租户的扩容或缩容操作前，需要进行以下操作：

* 开启租户内的负载均衡，实现分区在服务节点上的均衡。

  租户内的负载均衡由租户级配置项 `enable_rebalance` 控制。该配置项在系统租户下用于控制是否进行租户间的负载均衡；用户租户下用于控制是否进行租户内均衡。默认值为 `true`，设置后不需要重启 OBServer 节点，立即生效。

  开启租户内的负载均衡的语句如下：

  * 系统租户开启指定租户内的负载均衡

     ```sql
     ALTER SYSTEM SET enable_rebalance = true TENANT = 'tenant_name';
     ```

     该语句仅将用户租户下配置项 `enable_rebalance` 的值设置为 `true`。

     示例：
     ```sql
     ALTER SYSTEM SET enable_rebalance = true TENANT = 'tenant1';
     ```
  
  * 系统租户开启租户间的负载均衡，同时开启所有租户内的负载均衡

     ```sql
     ALTER SYSTEM SET enable_rebalance = true TENANT = ALL;
     ```

     该语句表示系统租户下和用户租户下配置项 `enable_rebalance` 的值均为 `true`。

  * 用户租户开启本租户内的负载均衡

    ```sql
    ALTER SYSTEM SET enable_rebalance = true;
    ```

  更多配置项 enable_rebalance 的详细说明，请参见 [enable_rebalance](../../../../7.reference/5.system-reference/1.system-configuration-items/3.cluster-level-configuration-items/79.enable_rebalance.md)。

* 由于空闲的资源池会被计算为占用的资源，故在扩容前，如果有租户被删除，建议与租户对应的资源池也一并删除，以便释放资源。

  删除资源池的相关操作请参见 [删除资源池](../../../2.basic-database-management/3.manage-resources/5.manage-resource-pools/7.delete-a-resource-pool.md
)。

* 进行租户缩容前，建议进行一轮转储以便释放租户正在使用的内存。

  手动触发转储的相关操作请参见 [手动触发转储](../../../2.basic-database-management/5.manage-data-storage/1.dump-management/3.trigger-dump-manually.md)。
  
* 查看集群中资源的分配情况，了解集群中资源的使用情况。

  查看集群节点的资源总量和分配状态的相关操作请参见 [查看集群的资源信息](../../../2.basic-database-management/1.manage-clusters/10.view-the-resource-information-of-a-cluster.md)。
  
  <main id="notice" type='notice'>
    <h4>注意</h4>
    <p>调整资源池的 <code>UNIT_NUM</code> 时，修改后的 <code>UNIT_NUM</code> 数量要小于或等于 Zone 内可用的 OBServer 节点数量。</p>
  </main>

## 调大 UNIT_NUM

假设当前集群中共包含 3 个可用区 `zone1`、`zone2`、`zone3`，每个 Zone 内包含 2 个 OBServer 节点。在集群中创建一个普通租户 `tenant1`，其资源分配情况如下：

```shell
obclient> CREATE RESOURCE UNIT unit1 MAX_CPU 2, MIN_CPU 2, MEMORY_SIZE '5G', MAX_IOPS 20000, MIN_IOPS 20000, IOPS_WEIGHT=2, LOG_DISK_SIZE '15G';

obclient> CREATE RESOURCE POOL pool1 UNIT 'unit1', UNIT_NUM 1, ZONE_LIST ('zone1','zone2','zone3');

obclient> CREATE TENANT MySQL resource_pool_list=('pool1');
```

从 V4.0.0 版本开始，OceanBase 数据库要求每个 Zone 的 Unit 个数必须保持一致。为了方便统一管理各个 Zone 的 Unit，系统引入了 Unit Group 机制，即不同 Zone 之间相同编号（`UNIT_GROUP_ID`）的 Unit 属于同一个 Unit Group。调大或调小 `UNIT_NUM` 本质上是以 Unit Group 为单位创建和删除 Unit。

随着业务量的不断变大，每个 Zone 上 1 个 Unit 已经无法承载当前的业务量，因此需要考虑调大 `UNIT_NUM` 来提高租户的服务能力，以满足新的业务需求。

1. 使用 `root` 用户登录集群的 `sys` 租户。

2. 进入 `oceanbase` 数据库。

   ```sql
   USE oceanbase;
   ```

3. 执行以下语句，获取当前租户的资源配置信息。

   1. 获取租户的 `TENANT_ID`。

      ```sql
      SELECT TENANT_ID,TENANT_NAME, TENANT_TYPE FROM oceanbase.DBA_OB_TENANTS WHERE TENANT_NAME ='tenant1';
      ```

      示例结果如下：

      ```shell
      +-----------+-------------+-------------+
      | TENANT_ID | TENANT_NAME | TENANT_TYPE |
      +-----------+-------------+-------------+
      |      1006 | tenant1     | USER        |
      +-----------+-------------+-------------+
      1 row in set
      ```
   
   2. 获取租户在每个 Zone 的 `UNIT_ID` 信息。

      ```sql
      SELECT * FROM oceanbase.DBA_OB_UNITS WHERE TENANT_ID = 1006;
      ```

      示例结果如下：

      ```shell
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      | UNIT_ID | TENANT_ID | STATUS | RESOURCE_POOL_ID | UNIT_GROUP_ID | CREATE_TIME                | MODIFY_TIME                | ZONE  | SVR_IP         | SVR_PORT | MIGRATE_FROM_SVR_IP | MIGRATE_FROM_SVR_PORT | MANUAL_MIGRATE | UNIT_CONFIG_ID | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      |    1002 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.941525 | 2023-07-01 19:18:36.354743 | zone1 | xx.xx.xx.198   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1004 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.944692 | 2023-07-01 19:18:36.355799 | zone2 | xx.xx.xx.197   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1006 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.948884 | 2023-07-01 19:18:36.357914 | zone3 | xx.xx.xx.192   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      3 rows in set
      ```

4. 执行以下语句，调大 `UNIT_NUM` 的数量。

   ```sql
   ALTER RESOURCE TENANT tenant1 UNIT_NUM = 2;
   ```

   语句执行后，系统会直接添加一个 Unit Group，即在每个 Zone 内添加一个 Unit。

5. 再次查看租户的 `UNIT_ID` 信息，确认每个 Zone 上均有 2 个 Unit。

   ```sql
   SELECT * FROM oceanbase.DBA_OB_UNITS WHERE TENANT_ID = 1006;
   ```

   查询结果如下：

   ```shell
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   | UNIT_ID | TENANT_ID | STATUS | RESOURCE_POOL_ID | UNIT_GROUP_ID | CREATE_TIME                | MODIFY_TIME                | ZONE  | SVR_IP         | SVR_PORT | MIGRATE_FROM_SVR_IP | MIGRATE_FROM_SVR_PORT | MANUAL_MIGRATE | UNIT_CONFIG_ID | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   |    1002 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.941525 | 2023-07-01 19:18:36.354743 | zone1 | xx.xx.xx.198   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1004 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.944692 | 2023-07-01 19:18:36.355799 | zone2 | xx.xx.xx.197   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1006 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.948884 | 2023-07-01 19:18:36.357914 | zone3 | xx.xx.xx.192   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1019 |      1006 | ACTIVE |             1001 |          1007 | 2023-07-03 15:29:07.388721 | 2023-07-03 15:29:07.388721 | zone1 | xx.xx.xx.196   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1020 |      1006 | ACTIVE |             1001 |          1007 | 2023-07-03 15:29:07.391888 | 2023-07-03 15:29:07.391888 | zone2 | xx.xx.xx.194   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1021 |      1006 | ACTIVE |             1001 |          1007 | 2023-07-03 15:29:07.394002 | 2023-07-03 15:29:07.394002 | zone3 | xx.xx.xx.64    |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   6 rows in set
   ```

## 调小 `UNIT_NUM`

假设当前集群中共包含 3 个可用区 `zone1`、`zone2`、`zone3`，每个 Zone 内包含 2 个 OBServer 节点。在集群中创建一个普通租户 `tenant1`，其资源分配情况如下：

```shell
obclient> CREATE RESOURCE UNIT unit1 MAX_CPU 2, MIN_CPU 2, MEMORY_SIZE '5G', MAX_IOPS 20000, MIN_IOPS 20000, IOPS_WEIGHT=2, LOG_DISK_SIZE '15G';

obclient> CREATE RESOURCE POOL pool1 UNIT 'unit1', UNIT_NUM 2, ZONE_LIST ('zone1','zone2','zone3');

obclient> CREATE TENANT MySQL resource_pool_list=('pool1');

随着业务的调整，不再需要每个 Zone 上 2 个 Unit，可以通过调小 `UNIT_NUM` 来进行缩容。调小 `UNIT_NUM` 实际就是删除资源单元。

1. 使用 `root` 用户登录集群的 `sys` 租户。

2. 进入 `oceanbase` 数据库。

   ```sql
   USE oceanbase;
   ```

3. 执行以下语句，获取当前租户的资源配置信息。

   1. 获取租户的 `TENANT_ID`。

      ```sql
      SELECT TENANT_ID,TENANT_NAME, TENANT_TYPE FROM oceanbase.DBA_OB_TENANTS WHERE TENANT_NAME =`tenant1`;
      ```

      示例结果如下：

      ```shell
      +-----------+-------------+-------------+
      | TENANT_ID | TENANT_NAME | TENANT_TYPE |
      +-----------+-------------+-------------+
      |      1006 | tenant1     | USER        |
      +-----------+-------------+-------------+
      1 row in set
      ```
   
   2. 获取租户在每个 Zone 的 `UNIT_ID` 信息。

      ```sql
      SELECT * FROM oceanbase.DBA_OB_UNITS WHERE TENANT_ID = 1006;
      ```

      示例结果如下：

      ```shell
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      | UNIT_ID | TENANT_ID | STATUS | RESOURCE_POOL_ID | UNIT_GROUP_ID | CREATE_TIME                | MODIFY_TIME                | ZONE  | SVR_IP         | SVR_PORT | MIGRATE_FROM_SVR_IP | MIGRATE_FROM_SVR_PORT | MANUAL_MIGRATE | UNIT_CONFIG_ID | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      |    1001 |      1006 | ACTIVE |             1001 |          1003 | 2023-07-01 19:14:47.938156 | 2023-07-01 19:18:36.354743 | zone1 | xx.xx.xx.196   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1002 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.941525 | 2023-07-01 19:18:36.354743 | zone1 | xx.xx.xx.198   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1003 |      1006 | ACTIVE |             1001 |          1003 | 2023-07-01 19:14:47.943637 | 2023-07-01 19:18:36.355799 | zone2 | xx.xx.xx.194   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1004 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.944692 | 2023-07-01 19:18:36.355799 | zone2 | xx.xx.xx.197   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1005 |      1006 | ACTIVE |             1001 |          1003 | 2023-07-01 19:14:47.946797 | 2023-07-01 19:18:36.357914 | zone3 | xx.xx.xx.64    |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      |    1006 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.948884 | 2023-07-01 19:18:36.357914 | zone3 | xx.xx.xx.192   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
      +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
      6 rows in set
      ```

      根据查询结果可知，`UNIT_ID` 为 `1001`、`1003`、`1005` 的 Unit 属于同一个 UNIT GROUP，且其 `UNIT_GROUP_ID` 为 `1003`；`UNIT_ID` 为 `1002`、`1004`、`1006` 的 Unit 属于同一个 UNIT GROUP，且其 `UNIT_GROUP_ID` 为 `1004`。

4. 执行以下语句，调小 `UNIT_NUM` 的数量。

   * 通过随机删除 `UNIT_GROUP` 的方式来调小 `UNIT_NUM` 的数量。

     ```sql
     ALTER RESOURCE TENANT tenant_name UNIT_NUM = count;
     ```

     相关参数说明如下：

     * `tenant_name`：待调整 `UNIT_NUM` 数量的租户名。
     * `count`：调整后该租户的 `UNIT_NUM` 个数。

     ```sql
     ALTER RESOURCE TENANT tenant1 UNIT_NUM = 1;
     ```

     该语句执行后，对于每个 Zone 上 2 个 Unit 的场景，系统会随机删除一个 Unit Group。

   * 通过删除指定 `UNIT_GROUP` 的方式来调小 `UNIT_NUM` 的数量

     ```sql
     ALTER RESOURCE TENANT tenant_name UNIT_NUM = count DELETE UNIT_GROUP = ( id_list );
     ```

     相关参数说明如下：

     * `tenant_name`：待调整 `UNIT_NUM` 数量的租户名。
     * `count`：调整后该租户的 `UNIT_NUM` 的个数。
     * `id_list`：待删除的 `UNIT_GROUP_ID`，多个 `UNIT_GROUP_ID` 之间通过英文逗号（,）分隔。`UNIT_GROUP_ID` 可以通过查询 `DBA_OB_UNITS` 视图获取。

     示例如下：

     ```sql
     ALTER RESOURCE TENANT tenant1 UNIT_NUM = 1 DELETE UNIT_GROUP =(1003);
     ```

     该语句执行后，对于每个 Zone 上 2 个 Unit 的场景，系统会将指定的 Unit Group 删除。

5. 再次查看租户的 `UNIT_ID` 信息，确认每个 Zone 上只有 1 个 Unit。

   ```sql
   SELECT * FROM oceanbase.DBA_OB_UNITS WHERE TENANT_ID = 1006;
   ```

   查询结果如下：

   ```shell
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   | UNIT_ID | TENANT_ID | STATUS | RESOURCE_POOL_ID | UNIT_GROUP_ID | CREATE_TIME                | MODIFY_TIME                | ZONE  | SVR_IP         | SVR_PORT | MIGRATE_FROM_SVR_IP | MIGRATE_FROM_SVR_PORT | MANUAL_MIGRATE | UNIT_CONFIG_ID | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   |    1002 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.941525 | 2023-07-01 19:18:36.354743 | zone1 | xx.xx.xx.198   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1004 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.944692 | 2023-07-01 19:18:36.355799 | zone2 | xx.xx.xx.197   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   |    1006 |      1006 | ACTIVE |             1001 |          1004 | 2023-07-01 19:14:47.948884 | 2023-07-01 19:18:36.357914 | zone3 | xx.xx.xx.192   |     2882 | NULL                |                  NULL | NULL           |           1001 |       2 |       2 |  5368709120 |   16106127360 |    20000 |    20000 |           2 |
   +---------+-----------+--------+------------------+---------------+----------------------------+----------------------------+-------+----------------+----------+---------------------+-----------------------+----------------+----------------+---------+---------+-------------+---------------+----------+----------+-------------+
   3 rows in set
   ```

## 更多信息

在租户的扩容操作中，您可以借助以下内部表或视图来获取租户资源相关的信息：

* oceanbase.DBA_OB_UNIT_CONFIGS

  `DBA_OB_UNIT_CONFIGS` 视图记录了当前集群中的所有 unit_config 信息。

  示例：

  ```sql
  obclient> SELECT * FROM oceanbase.DBA_OB_UNIT_CONFIGS;
  +----------------+-----------------+---------+---------+-------------+---------------+----------+----------+-------------+
  | UNIT_CONFIG_ID | NAME            | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
  +----------------+-----------------+---------+---------+-------------+---------------+----------+----------+-------------+
  |              1 | sys_unit_config |     2.5 |     2.5 | 17179869184 |   17179869184 |    25000 |    25000 |           2 |
  |           1001 | unit001         |       1 |       1 |  6442450944 |   19327352832 |    10000 |    10000 |           1 |
  |           1002 | unit002         |       1 |       1 |  6442450944 |   19327352832 |    10000 |    10000 |           1 |
  |           1003 | unit003         |       1 |       1 |  6442450944 |   19327352832 |    10000 |    10000 |           1 |
  |           1004 | unit004         |       1 |       1 |  6442450944 |   19327352832 |    10000 |    10000 |           1 |
  |           1005 | unit1           |       6 |       6 | 38654705664 |    2147483648 |     1024 |     1024 |           0 |
  +----------------+-----------------+---------+---------+-------------+---------------+----------+----------+-------------+
  6 rows in set
  ```

* oceanbase.GV$OB_UNITS

  `GV$OB_UNITS` 视图中记录了集群中所有租户的资源分配情况。

  查询示例如下：

  ```shell
  obclient> SELECT * FROM oceanbase.GV$OB_UNITS\G
  *************************** 1. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1
           TENANT_ID: 1
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 1
             MIN_CPU: 1
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 10000
            MIN_IOPS: 10000
         IOPS_WEIGHT: 1
       LOG_DISK_SIZE: 5368709120
     LOG_DISK_IN_USE: 101820612
    DATA_DISK_IN_USE: 33554432
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:18:16.846816
  *************************** 2. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1001
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 99578660
    DATA_DISK_IN_USE: 29360128
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:23:01.010798
  *************************** 3. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1002
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 20000
            MIN_IOPS: 20000
         IOPS_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 154180012
    DATA_DISK_IN_USE: 18874368
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:23:01.010798
  *************************** 4. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1003
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 98556577
    DATA_DISK_IN_USE: 29360128
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:24:07.490742
  *************************** 5. row ***************************
              SVR_IP: xx.xx.xx.xx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1004
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 20000
            MIN_IOPS: 20000
         IOPS_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 158676614
    DATA_DISK_IN_USE: 25165824
              STATUS: NORMAL
         CREATE_TIME: 2023-05-29 10:24:07.490742
  5 rows in set
  ```

* oceanbase.DBA_OB_RESOURCE_POOLS

   `DBA_OB_RESOURCE_POOLS` 视图中记录了当前集群中所有资源池的资源配置情况。其中，`unit_count` 表示资源池中 Unit 个数。

  查询示例如下：

  ```sql
  obclient> SELECT * FROM oceanbase.DBA_OB_RESOURCE_POOLS;
  +------------------+----------+-----------+----------------------------+----------------------------+------------+----------------+-----------+--------------+
  | RESOURCE_POOL_ID | NAME     | TENANT_ID | CREATE_TIME                | MODIFY_TIME                | UNIT_COUNT | UNIT_CONFIG_ID | ZONE_LIST | REPLICA_TYPE |
  +------------------+----------+-----------+----------------------------+----------------------------+------------+----------------+-----------+--------------+
  |                1 | sys_pool |         1 | 2022-07-19 11:05:18.168896 | 2022-07-19 11:05:18.175708 |          1 |              1 | zone1     | FULL         |
  |             1001 | pool001  |      1002 | 2022-07-19 13:47:55.854548 | 2022-07-19 13:48:36.307978 |          1 |           1001 | zone1     | FULL         |
  |             1002 | pool002  |      1006 | 2022-07-19 13:49:53.869792 | 2022-07-19 13:51:56.626742 |          1 |           1001 | zone1     | FULL         |
  +------------------+----------+-----------+----------------------------+----------------------------+------------+----------------+-----------+--------------+
  3 rows in set
  ```
